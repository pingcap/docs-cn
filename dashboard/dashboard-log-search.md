---
title: TiDB Dashboard 日志搜索页面
summary: 在集群中搜索所有节点上的日志
category: how-to
---

# TiDB Dashboard 日志搜索页面

该页面上允许用户在集群中搜索所有节点上的日志，在页面上预览搜索结果和下载日志。

## 访问

登录 Dashboard 后点击左侧导航的**日志搜索**可以进入此功能页面：

![日志搜索首页](/media/dashboard/dashboard-log-search-home.png)

该页面提供 4 个搜索参数，包括：

- 时间范围：限定搜索时间范围内的日志，默认值为最近 30 分钟
- 日志等级：限定最低日志等级，搜索该日志等级以上的所有日志，默认值为 INFO 等级
- 关键词：任何合法的任何字符串，可选，关键词之间以空格分割，支持正则表达式（大小写不敏感）
- 组件：选择要搜索的集群组件，多选，非空，默认选中所有组件

点击**搜索**按钮后，会进入搜索结果的详情页。

## 搜索结果详情

搜索结果详情页面如下图所示：

![搜索结果](/media/dashboard/dashboard-log-search-result.png)

整个页面分为三个部分：

- 搜索参数选项：与搜索页面的参数选项相同，可以在表单中重新选择参数并开始一次新的搜索（对应上图中框选的区域 1）
- 搜索进度：在页面右侧，展示当前搜索的进度，包括每个节点日志搜索状态和统计等（对应上图中框选的区域 2）
- 搜索结果（对应上图中框选的区域 3）：
    - 时间：日志产生的时间，时区与前端用户所处时区相同
    - 日志等级：日志等级
    - 组件类型：显示组件名及其地址
    - 日志：每条日志记录的正文部分，不包含日志的时间和日志等级。过长的日志会自动截断，鼠标单击该行可以展开查看完整内容，完整日志最长显示 512 个字符

> **注意：**
>
> 在该页面上最多只显示 500 条搜索结果，完整的搜索结果可以通过下载得到。

### 搜索进度

在搜索进度区域中，对一个节点的搜索称为一次搜索任务，对搜索任务的状态分为：

- 运行中：开始搜索后，所有任务会进入**运行中**状态
- 成功：任务完成后自动转到**成功**，此时日志已缓存在 Dashboard 后端所在的本地磁盘中，可以提供给前端下载
- 失败：用户主动取消，或者某种原因报错退出的任务进入**失败**状态。任务失败时会自动清理本地临时文件

搜索进度区域包含三个控制按钮：

- 下载选中日志：下载被勾选组件的日志（只有已完成的才能被勾选），返回 tar 文件，解压得到一个或多个 zip 文件（每个组件对应一个 zip 文件），解压 zip 得到 log 文本文件
- 取消：取消所有正在运行的任务，只能在有运行中的任务时才能点击
- 重试：重试所有失败的任务，只有在有失败任务且无正在运行的任务时才能点击

## 搜索历史列表

在日志搜索首页点击**查看搜索历史**链接，进入搜索历史列表页面：

![搜索历史入口](/media/dashboard/dashboard-log-search-history-entry.png)

![搜索历史列表](/media/dashboard/dashboard-log-search-history.png)

该列表显示每次搜索的日志的时间范围、日志等级、组件、关键字以及搜索状态等信息。点击**操作**列的**查看详情**链接将跳转到此次搜索的结果详情页面。

可以对不再需要的搜索历史执行删除操作，点击右上角的**删除全部任务**，或者先选中需要删除的某些行后再点击**删除选中的任务**进行删除：

![删除搜索历史](/media/dashboard/dashboard-log-search-delete-history.png)
