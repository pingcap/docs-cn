---
title: 配置维护时间窗口
summary: 了解如何为您的集群配置维护时间窗口。
---

# 配置维护时间窗口

维护时间窗口是一个指定的时间段，在此期间自动执行计划内维护任务，如操作系统更新、安全补丁和基础设施升级，以确保 TiDB Cloud 服务的可靠性、安全性和性能。

在维护时间窗口期间，维护工作会逐个在 TiDB Cloud Dedicated 集群上执行，因此整体影响最小。虽然可能会出现临时的连接中断或 QPS 波动，但集群仍然可用，现有的数据导入、备份、恢复、迁移和复制任务仍可正常运行。

通过配置维护时间窗口，您可以轻松安排和管理维护任务，以最大限度地减少维护影响。例如，您可以将维护时间窗口的开始时间设置为避开应用程序工作负载的高峰时段。

> **注意：**
>
> 维护时间窗口功能仅适用于 [TiDB Cloud Dedicated 集群](/tidb-cloud/select-cluster-tier.md#tidb-cloud-dedicated)。

## 维护时间窗口期间允许和不允许的操作

在维护时间窗口期间，某些操作是允许的，而某些操作是不允许的。

- 允许的操作：

    - SQL 操作
    - 创建集群
    - 删除集群
    - 创建备份任务
    - 恢复集群
    - 访问集群页面

- 不允许的操作：

    - 修改、暂停或恢复集群
    - 在 TiDB Cloud 控制台中更改安全设置
    - 创建私有链接或配置 VPC 对等连接
    - 创建导入任务、迁移任务或变更数据捕获任务
    - 调整迁移任务或变更数据捕获任务的规格

## 获取维护时间窗口通知

为了避免潜在的中断，了解维护计划并相应地规划您的操作很重要。

对于每个维护时间窗口，TiDB Cloud 会在以下时间点向所有项目成员发送四封电子邮件通知：

- 维护时间窗口开始前两周（不包括紧急维护任务）
- 维护时间窗口开始前 72 小时
- 维护时间窗口开始时
- 维护时间窗口完成时

## 查看和配置维护时间窗口

定期维护确保执行必要的更新，以保护 TiDB Cloud 免受安全威胁、性能问题和不可靠性的影响。因此，维护时间窗口默认启用且无法禁用。

> **注意：**
>
> - 对于您首次注册 TiDB Cloud 时自动创建的默认项目，维护时间窗口在每周三 03:00 AM 开始（基于您的 TiDB Cloud 组织的时区）。
> - 对于您创建的新项目，您可以在项目设置期间为维护时间窗口设置自定义开始时间。

您可以按照以下步骤将开始时间修改为您的首选时间或在截止日期前重新安排维护任务：

1. 在 [TiDB Cloud 控制台](https://tidbcloud.com)中，使用左上角的组合框切换到您的目标项目。
2. 在左侧导航栏中，点击**项目设置** > **维护**。
3. 在**维护**页面上，查看维护信息。

     - 如果显示任何维护任务，请查看描述、计划开始时间和截止日期。维护任务将在指定时间开始。

     - 如果没有维护数据，则表示最近没有计划维护任务。

4. （可选）点击**维护时间窗口设置**以修改维护时间窗口的开始时间。请注意，只有在该周计划有维护时间窗口时，才会在指定的开始时间执行维护。

5. 要重新安排特定维护任务，请在**操作**列中点击 **...** > **重新安排**，并在截止日期前选择新时间。

    如果您需要将维护任务重新安排到截止日期之后，请联系 [TiDB Cloud 支持](/tidb-cloud/tidb-cloud-support.md#tidb-cloud-support)寻求帮助。

## 常见问题

- 什么是维护任务？

    维护任务通常包括操作系统更新、安全补丁和基础设施升级。

- 我可以禁用维护时间窗口吗？

    不可以。维护时间窗口默认启用且无法禁用。您可以修改维护时间窗口的开始时间或在截止日期前重新安排维护任务。更多信息，请参见[查看和配置维护时间窗口](#查看和配置维护时间窗口)。

- 维护时间窗口持续多长时间？

    这取决于具体情况。对于每个项目，维护会逐个在符合条件的 TiDB 集群上执行。维护持续时间因集群数量、集群数据大小和要执行的维护任务而异。

- 维护任务会在任何状态的集群上执行吗？

    不会。TiDB Cloud 在对集群执行维护任务之前会检查集群状态。

    - 如果集群处于**创建中**或**已暂停**状态，则不需要维护任务。
    - 如果集群正在运行自动或手动备份，维护将延迟并等待当前备份成功完成后触发。请注意，对于数据量大的集群，备份过程可能需要很长时间，例如 12 小时。为了最大限度地减少对集群的影响，建议仔细设置备份和维护时间窗口的开始时间。
    - 如果集群处于任何其他状态，维护任务将按计划开始。
