---
title: å­—ç¬¦ä¸²å‡½æ•°
---

# å­—ç¬¦ä¸²å‡½æ•°

TiDB æ”¯æŒä½¿ç”¨å¤§éƒ¨åˆ† MySQL 5.7 ä¸­æä¾›çš„[å­—ç¬¦ä¸²å‡½æ•°](https://dev.mysql.com/doc/refman/5.7/en/string-functions.html)ã€ä¸€éƒ¨åˆ† MySQL 8.0 ä¸­æä¾›çš„[å­—ç¬¦ä¸²å‡½æ•°](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html)å’Œä¸€éƒ¨åˆ† Oracle 21 æ‰€æä¾›çš„[å‡½æ•°](https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlqr/SQL-Functions.html#GUID-93EC62F8-415D-4A7E-B050-5D5B2C127009)ã€‚

å…³äº Oracle å‡½æ•°å’Œ TiDB å‡½æ•°çš„å¯¹ç…§å…³ç³»ï¼Œè¯·å‚è€ƒ [Oracle ä¸ TiDB å‡½æ•°å’Œè¯­æ³•å·®å¼‚å¯¹ç…§](/oracle-functions-to-tidb.md)ã€‚

## æ”¯æŒçš„å‡½æ•°

### [`ASCII()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_ascii)

`ASCII()` å‡½æ•°ç”¨äºè·å–è¾“å…¥çš„å‚æ•°ä¸­æœ€å·¦å­—ç¬¦çš„ ASCII å€¼ã€‚è¯¥å‚æ•°å¯ä»¥ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚

- å¦‚æœè¾“å…¥å‚æ•°ä¸ä¸ºç©ºï¼Œè¯¥å‡½æ•°è¿”å›å‚æ•°ä¸­æœ€å·¦å­—ç¬¦çš„ ASCII å€¼ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè¯¥å‡½æ•°è¿”å› `0`ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

> **æ³¨æ„ï¼š**
>
> `ASCII()` åªèƒ½å¤„ç†é‚£äº›ç”¨ 8 ä¸ªäºŒè¿›åˆ¶æ•°å­—ï¼ˆå³å•ä¸ªå­—èŠ‚ï¼‰æ¥è¡¨ç¤ºçš„å­—ç¬¦ã€‚

æŸ¥è¯¢ç¤ºä¾‹ï¼š

```sql
SELECT ASCII('A'), ASCII('TiDB'), ASCII(23);
```

è¿”å›ç»“æœï¼š

```sql
+------------+---------------+-----------+
| ASCII('A') | ASCII('TiDB') | ASCII(23) |
+------------+---------------+-----------+
|         65 |            84 |        50 |
+------------+---------------+-----------+
```

### [`BIN()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_bin)

`BIN()` å‡½æ•°ç”¨äºå°†è¾“å…¥çš„å‚æ•°è½¬æ¢ä¸ºå…¶äºŒè¿›åˆ¶å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚è¯¥å‚æ•°å¯ä»¥ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚

- å¦‚æœè¾“å…¥å‚æ•°ä¸ºæ­£æ•°ï¼Œè¯¥å‡½æ•°è¿”å›è¯¥å‚æ•°çš„äºŒè¿›åˆ¶å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œè¯¥å‡½æ•°ä¼šå°†è¯¥å‚æ•°çš„ç»å¯¹å€¼è½¬æ¢ä¸ºå…¶äºŒè¿›åˆ¶å€¼ï¼Œç„¶åå¯¹äºŒè¿›åˆ¶å€¼çš„æ¯ä½å–åï¼ˆ`0` å˜ä¸º `1`ï¼Œ`1` å˜ä¸º `0`ï¼‰ï¼Œæœ€ååŠ ä¸Š `1`ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”è¯¥å­—ç¬¦ä¸²ä¸­åªåŒ…å«æ•°å­—ï¼Œè¯¥å‡½æ•°å°†æŒ‰ç…§è¯¥æ•°å­—è¿”å›ç»“æœã€‚ä¾‹å¦‚ï¼Œ`"123"` ä¸ `123` çš„è¿”å›ç»“æœç›¸åŒã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”è¯¥å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸æ˜¯æ•°å­—ï¼ˆå¦‚ `"q123"`ï¼‰ï¼Œè¯¥å‡½æ•°è¿”å› `0`ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”è¯¥å­—ç¬¦ä¸²ç”±æ•°å­—å’Œéæ•°å­—ç»„æˆï¼Œè¯¥å‡½æ•°å°†æŒ‰ç…§è¯¥å‚æ•°ä¸­æœ€å‰é¢è¿ç»­çš„æ•°å­—è¿”å›ç»“æœã€‚ä¾‹å¦‚ï¼Œ`'123q123'` ä¸ `123` çš„è¿”å›ç»“æœç›¸åŒï¼Œä½† `BIN('123q123')` ä¼šäº§ç”Ÿä¸€ä¸ª `Truncated incorrect INTEGER value: '123q123'` çš„è­¦å‘Šã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

æŸ¥è¯¢ç¤ºä¾‹ 1ï¼š

```sql
SELECT BIN(123), BIN('123q123');
```

è¿”å›ç»“æœ 1ï¼š

```sql
+----------+----------------+
| BIN(123) | BIN('123q123') |
+----------+----------------+
| 1111011  | 1111011        |
+----------+----------------+
```

æŸ¥è¯¢ç¤ºä¾‹ 2ï¼š

```sql
SELECT BIN(-7);
```

è¿”å›ç»“æœ 2ï¼š

```sql
+------------------------------------------------------------------+
| BIN(-7)                                                          |
+------------------------------------------------------------------+
| 1111111111111111111111111111111111111111111111111111111111111001 |
+------------------------------------------------------------------+
```

### [`BIT_LENGTH()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_bit-length)

`BIT_LENGTH()` å‡½æ•°ç”¨äºè¿”å›è¾“å…¥å‚æ•°çš„é•¿åº¦ï¼Œå•ä½ä¸º bitã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT BIT_LENGTH("TiDB");

+--------------------+
| BIT_LENGTH("TiDB") |
+--------------------+
|                 32 |
+--------------------+
```

æ¯ä¸ªå­—ç¬¦ 8 ä½ x 4 ä¸ªå­—ç¬¦ = 32 ä½

```sql
SELECT BIT_LENGTH("PingCAP 123");

+---------------------------+
| BIT_LENGTH("PingCAP 123") |
+---------------------------+
|                        88 |
+---------------------------+
```

æ¯ä¸ªå­—ç¬¦ 8 ä½ï¼ˆç©ºæ ¼ä¹Ÿä¼šè¢«è®¡ç®—åœ¨å†…ï¼Œå› ä¸ºå®ƒæ˜¯éå­—æ¯æ•°å­—å­—ç¬¦ï¼‰ x 11 ä¸ªå­—ç¬¦ = 88 ä½

```sql
SELECT CustomerName, BIT_LENGTH(CustomerName) AS BitLengthOfName FROM Customers;

+--------------------+-----------------+
| CustomerName       | BitLengthOfName |
+--------------------+-----------------+
| Albert Einstein    |             120 |
| Robert Oppenheimer |             144 |
+--------------------+-----------------+
```

> **æ³¨æ„ï¼š**
>
> ä¸Šé¢è¿™ä¸ªç¤ºä¾‹å‡è®¾æ•°æ®åº“ä¸­å­˜åœ¨ä¸€ä¸ªåä¸º `Customers` çš„è¡¨ï¼Œè¡¨ä¸­æœ‰ä¸€ä¸ªåä¸º `CustomerName` çš„åˆ—ã€‚

### [`CHAR()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char)

`CHAR()` å‡½æ•°ç”¨äºè·å–æŒ‡å®š ASCII å€¼çš„å¯¹åº”å­—ç¬¦ã€‚è¯¥å‡½æ•°æ‰§è¡Œçš„æ“ä½œä¸ `ASCII()` ç›¸åï¼Œ`ASCII()` ç”¨äºè¿”å›æŒ‡å®šå­—ç¬¦çš„ ASCII å€¼ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT CHAR(65);

+------------+
|  CHAR(65)  |
+------------+
|          A |
+------------+
```

```sql
SELECT CHAR(84);

+------------+
|  CHAR(84)  |
+------------+
|          T |
+------------+
```

`CHAR()` å‡½æ•°è¿˜å¯ç”¨äºè·å–è¶…å‡ºæ ‡å‡† ASCII èŒƒå›´ï¼ˆ`0` - `127`ï¼‰çš„ ASCII å€¼çš„å¯¹åº”å­—ç¬¦ã€‚

```sql
/*For extended ASCII: */

SELECT CHAR(128);

+------------+
|  CHAR(128) |
+------------+
|       0x80 |
+------------+
```

`CHAR()` å‡½æ•°è¿˜å¯ç”¨äºè·å– Unicode å€¼çš„å¯¹åº”å­—ç¬¦ã€‚

```sql
/* For Unicode: */

--skip-binary-as-hex

SELECT CHAR(50089);

+--------------+
|  CHAR(50089) |
+--------------+
|            Ã© |
+--------------+
```

### [`CHAR_LENGTH()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_char-length)

`CHAR_LENGTH()` å‡½æ•°ç”¨äºè·å–è¾“å…¥å‚æ•°ä¸­å­—ç¬¦çš„æ€»æ•°ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT CHAR_LENGTH("TiDB") AS LengthOfString;

+----------------+
| LengthOfString |
+----------------+
|              4 |
+----------------+
```

```sql
SELECT CustomerName, CHAR_LENGTH(CustomerName) AS LenghtOfName FROM Customers;

+--------------------+--------------+
| CustomerName       | LenghtOfName |
+--------------------+--------------+
| Albert Einstein    |           15 |
| Robert Oppenheimer |           18 |
+--------------------+--------------+
```

> **æ³¨æ„ï¼š**
>
> ä¸Šé¢è¿™ä¸ªç¤ºä¾‹å‡è®¾æ•°æ®åº“ä¸­å­˜åœ¨ä¸€ä¸ªåä¸º `Customers` çš„è¡¨ï¼Œè¡¨ä¸­æœ‰ä¸€ä¸ªåä¸º `CustomerName` çš„åˆ—ã€‚

### [`CHARACTER_LENGTH()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_character-length)

`CHARACTER_LENGTH()` å‡½æ•°ä¸ `CHAR_LENGTH()` å‡½æ•°åŠŸèƒ½ç›¸åŒï¼Œè¿”å›ç»“æœç›¸åŒï¼Œå¯ä»¥äº’æ¢ä½¿ç”¨ã€‚

### [`CONCAT()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_concat)

`CONCAT()` å‡½æ•°ç”¨äºå°†è¾“å…¥çš„å‚æ•°è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

è¯­æ³•ï¼š

```sql
CONCAT(str1,str2,...)
```

`str1, str2, ...` ä¸ºè¦è¿æ¥çš„å‚æ•°ã€‚è¯¥å‚æ•°å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚

æŸ¥è¯¢ç¤ºä¾‹ï¼š

```sql
SELECT CONCAT('TiDB', ' ', 'Server', '-', 1, TRUE);
```

è¿”å›ç»“æœï¼š

```sql
+---------------------------------------------+
| CONCAT('TiDB', ' ', 'Server', '-', 1, TRUE) |
+---------------------------------------------+
| TiDB Server-11                              |
+---------------------------------------------+
```

å¦‚æœä»»ä¸€å‚æ•°çš„å€¼ä¸º `NULL`ï¼Œ åˆ™ `CONCAT()` è¿”å› `NULL`ã€‚

æŸ¥è¯¢ç¤ºä¾‹ï¼š

```sql
SELECT CONCAT('TiDB', NULL, 'Server');
```

è¿”å›ç»“æœï¼š

```sql
+--------------------------------+
| CONCAT('TiDB', NULL, 'Server') |
+--------------------------------+
| NULL                           |
+--------------------------------+
```

é™¤äº†ä½¿ç”¨ `CONCAT()` å‡½æ•°å¤–ï¼Œä½ ä¹Ÿå¯ä»¥é€šè¿‡å­—ç¬¦ä¸²å½¼æ­¤ç›¸é‚»çš„æ–¹å¼è·å–æ‹¼æ¥å­—ç¬¦ä¸²ï¼Œä½†æ˜¯è¯¥æ–¹å¼ä¸æ”¯æŒæ•°å­—ç±»å‹ã€‚ä¾‹å¦‚ï¼š

```sql
SELECT 'Ti' 'DB' ' ' 'Server';
```

è¿”å›ç»“æœï¼š

```sql
+-------------+
| Ti          |
+-------------+
| TiDB Server |
+-------------+
```

### [`CONCAT_WS()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_concat-ws)

`CONCAT_WS()` å‡½æ•°æ˜¯ä¸€ç§å¸¦åˆ†éš”ç¬¦çš„ [`CONCAT()`](#concat)ï¼Œè¿”å›ç”±åˆ†éš”ç¬¦è¿æ¥çš„å­—ç¬¦ä¸²ã€‚

è¯­æ³•ï¼š

```sql
CONCAT_WS(separator,str1,str2,...)
```

- `separator`ï¼šç¬¬ä¸€ä¸ªå‚æ•°ä¸ºåˆ†éš”ç¬¦ï¼Œç”¨äºè¿æ¥å…¶ä½™çš„ä¸ä¸º `NULL` çš„å‚æ•°ã€‚
- `str1, str2, ...`ï¼šè¦è¿æ¥çš„å‚æ•°ã€‚è¯¥å‚æ•°å¯ä»¥ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚

æŸ¥è¯¢ç¤ºä¾‹ï¼š

```sql
SELECT CONCAT_WS(',', 'TiDB Server', 'TiKV', 'PD');
```

è¿”å›ç»“æœï¼š

```sql
+---------------------------------------------+
| CONCAT_WS(',', 'TiDB Server', 'TiKV', 'PD') |
+---------------------------------------------+
| TiDB Server,TiKV,PD                         |
+---------------------------------------------+
```

- å¦‚æœåˆ†éš”ç¬¦ä¸ºç©ºï¼Œåˆ™ `CONCAT_WS()` ç­‰æ•ˆäº `CONCAT()`ï¼Œè¿”å›å…¶ä½™å‚æ•°è¿æ¥åçš„å­—ç¬¦ä¸²ã€‚

    æŸ¥è¯¢ç¤ºä¾‹ï¼š

    ```sql
    SELECT CONCAT_WS('', 'TiDB Server', 'TiKV', 'PD');
    ```

    è¿”å›ç»“æœï¼š

    ```sql
    +--------------------------------------------+
    | CONCAT_WS('', 'TiDB Server', 'TiKV', 'PD') |
    +--------------------------------------------+
    | TiDB ServerTiKVPD                          |
    +--------------------------------------------+
    ```

- å¦‚æœåˆ†éš”ç¬¦ä¸º `NULL`ï¼Œåˆ™ `CONCAT_WS()`è¿”å› `NULL`ã€‚

    æŸ¥è¯¢ç¤ºä¾‹ï¼š

    ```sql
    SELECT CONCAT_WS(NULL, 'TiDB Server', 'TiKV', 'PD');
    ```

    è¿”å›ç»“æœï¼š

    ```sql
    +----------------------------------------------+
    | CONCAT_WS(NULL, 'TiDB Server', 'TiKV', 'PD') |
    +----------------------------------------------+
    | NULL                                         |
    +----------------------------------------------+
    ```

- å¦‚æœç”¨äºè¿æ¥çš„å‚æ•°ä¸­åªæœ‰ä¸€ä¸ªä¸ä¸º `NULL`ï¼Œåˆ™ `CONCAT_WS()` è¿”å›æ­¤å‚æ•°ã€‚

    æŸ¥è¯¢ç¤ºä¾‹ï¼š

    ```sql
    SELECT CONCAT_WS(',', 'TiDB Server', NULL);
    ```

    è¿”å›ç»“æœï¼š

    ```sql
    +-------------------------------------+
    | CONCAT_WS(',', 'TiDB Server', NULL) |
    +-------------------------------------+
    | TiDB Server                         |
    +-------------------------------------+
    ```

- å¦‚æœç”¨äºè¿æ¥çš„å‚æ•°ä¸­æœ‰ `NULL`ï¼Œ`CONCAT_WS()`ä¼šå¿½ç•¥ `NULL`ã€‚

    æŸ¥è¯¢ç¤ºä¾‹ï¼š

    ```sql
    SELECT CONCAT_WS(',', 'TiDB Server', NULL, 'PD');
    ```

    è¿”å›ç»“æœï¼š

    ```sql
    +-------------------------------------------+
    | CONCAT_WS(',', 'TiDB Server', NULL, 'PD') |
    +-------------------------------------------+
    | TiDB Server,PD                            |
    +-------------------------------------------+
    ```

- å¦‚æœç”¨äºè¿æ¥çš„å‚æ•°ä¸­æœ‰ç©ºå­—ç¬¦ä¸²ï¼Œ`CONCAT_WS()` ä¸ä¼šå¿½ç•¥è¯¥å­—ç¬¦ä¸²ã€‚

    æŸ¥è¯¢ç¤ºä¾‹ï¼š

    ```sql
    SELECT CONCAT_WS(',', 'TiDB Server', '', 'PD');
    ```

    è¿”å›ç»“æœï¼š

    ```sql
    +-----------------------------------------+
    | CONCAT_WS(',', 'TiDB Server', '', 'PD') |
    +-----------------------------------------+
    | TiDB Server,,PD                         |
    +-----------------------------------------+
    ```

### [`ELT()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_elt)

è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦ä¸²

### [`EXPORT_SET()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_export-set)

è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶ä¸­å€¼ä½ä¸­è®¾ç½®çš„æ¯ä¸ªä½ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ª on å­—ç¬¦ä¸²ï¼Œè€Œæ¯ä¸ªæœªè®¾ç½®çš„ä½ï¼Œå¯ä»¥å¾—åˆ°ä¸€ä¸ª off å­—ç¬¦ä¸²

### [`FIELD()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_field)

è¿”å›å‚æ•°åœ¨åç»­å‚æ•°ä¸­å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®

åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œ`FIELD()` çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ `needle`ï¼Œå®ƒä¸åç»­åˆ—è¡¨ä¸­çš„ç¬¬äºŒä¸ªå‚æ•°åŒ¹é…ï¼Œå› æ­¤å‡½æ•°è¿”å› `2`ã€‚

```sql
SELECT FIELD('needle', 'A', 'needle', 'in', 'a', 'haystack');
+-------------------------------------------------------+
| FIELD('needle', 'A', 'needle', 'in', 'a', 'haystack') |
+-------------------------------------------------------+
|                                                     2 |
+-------------------------------------------------------+
1 row in set (0.00 sec)
```

### [`FIND_IN_SET()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_find-in-set)

è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­å‡ºç°çš„ä½ç½®

è¯¥å‡½æ•°é€šå¸¸ä¸ [`SET`](/data-type-string.md#set-ç±»å‹) æ•°æ®ç±»å‹ä¸€èµ·ä½¿ç”¨ã€‚

åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œ`Go` æ˜¯é›†åˆ `COBOL,BASIC,Rust,Go,Java,Fortran` ä¸­çš„ç¬¬å››ä¸ªå…ƒç´ ï¼Œå› æ­¤å‡½æ•°è¿”å› `4`ã€‚

```sql
SELECT FIND_IN_SET('Go', 'COBOL,BASIC,Rust,Go,Java,Fortran');
+-------------------------------------------------------+
| FIND_IN_SET('Go', 'COBOL,BASIC,Rust,Go,Java,Fortran') |
+-------------------------------------------------------+
|                                                     4 |
+-------------------------------------------------------+
1 row in set (0.00 sec)
```

### [`FORMAT()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_format)

`FORMAT(X,D[,locale])` å‡½æ•°ç”¨äºå°†æ•°å­— `X` æ ¼å¼åŒ–ä¸ºç±»ä¼¼äº `â€œ#,###,###.##â€` çš„æ ¼å¼ï¼Œå››èˆäº”å…¥ä¿ç•™ `D` ä½å°æ•°ï¼Œå¹¶å°†ç»“æœä½œä¸ºå­—ç¬¦ä¸²è¿”å›ã€‚

å‚æ•°ï¼š

- `X`ï¼šè¦æ ¼å¼åŒ–çš„æ•°å­—ã€‚å¯ä»¥æ˜¯ç›´æ¥çš„æ•°å­—å€¼ã€æ•°å­—å­—ç¬¦ä¸²ã€æˆ–ç§‘å­¦è®°æ•°æ³•æ ¼å¼çš„æ•°å­—ã€‚
- `D`ï¼šæŒ‡å®šè¿”å›å€¼çš„å°æ•°ä½æ•°ã€‚è¯¥å‡½æ•°æ ¹æ® `D` å¯¹ `X` è¿›è¡Œå››èˆäº”å…¥ã€‚å¦‚æœ `D` å¤§äº `X` çš„å®é™…å°æ•°ä½æ•°ï¼Œåˆ™ä¼šåœ¨ç»“æœä¸­å¡«å……ç›¸åº”é•¿åº¦çš„é›¶ã€‚
- `[locale]`ï¼šæŒ‡å®šä¸€ä¸ªåŒºåŸŸè®¾ç½®ï¼Œç”¨äºç»“æœä¸­æ•°å­—çš„å°æ•°ç‚¹ã€åƒä½åˆ†éš”ç¬¦å’Œåˆ†éš”ç¬¦ä¹‹é—´çš„åˆ†ç»„ã€‚åˆæ³•çš„åŒºåŸŸè®¾ç½®å€¼ä¸ [`lc_time_names`](https://dev.mysql.com/doc/refman/8.3/en/server-system-variables.html#sysvar_lc_time_names) ç³»ç»Ÿå˜é‡çš„åˆæ³•å€¼ç›¸åŒã€‚å¦‚æœæœªæŒ‡å®šæˆ–è€…è®¾ç½®ä¸º `NULL`ï¼Œåˆ™é»˜è®¤ä½¿ç”¨ `'en_US'` åŒºåŸŸè®¾ç½®ã€‚è¯¥å‚æ•°å¯é€‰ã€‚

è¡Œä¸ºç»†èŠ‚ï¼š

- å¦‚æœè¾“å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œä¸”è¯¥å­—ç¬¦ä¸²ä¸­åªåŒ…å«æ•°å­—æ—¶ï¼Œè¯¥å‡½æ•°å°†æŒ‰ç…§è¯¥æ•°å­—è¿”å›ç»“æœã€‚ä¾‹å¦‚ï¼Œ`FORMAT('12.36', 1)` ä¸ `FORMAT(12.36, 1)` çš„è¿”å›ç»“æœç›¸åŒã€‚
- å¦‚æœè¾“å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºç§‘å­¦è®¡æ•°æ³•ï¼ˆ`E/e`ï¼‰è¡¨ç¤ºçš„æ•°å­—æ—¶ï¼Œè¯¥å‡½æ•°å°†æŒ‰ç…§è¯¥æ•°å­—è¿”å›ç»“æœã€‚ä¾‹å¦‚ï¼Œ`FORMAT('1E2', 3)`ï¼‰ï¼Œå‡½æ•°è¿”å› `100.000`ã€‚
- å¦‚æœè¾“å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºéæ•°å­—å¼€å¤´çš„å­—ç¬¦ä¸²æ—¶ï¼Œè¯¥å‡½æ•°é™¤äº†è¿”å›é›¶å€¼å¤–ï¼Œè¿˜è¿”å›ä¸€ä¸ªè­¦å‘Š `(Code 1292)`ã€‚ä¾‹å¦‚ï¼Œ`FORMAT('q12.36', 5)` å‡½æ•°è¿”å› `0.00000`ï¼Œè¿˜ä¼šåŒ…å«ä¸€ä¸ªè­¦å‘Š `Warning (Code 1292): Truncated incorrect DOUBLE value: 'q12.36'`ã€‚
- å¦‚æœè¾“å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ•°å­—å’Œéæ•°å­—æ··åˆçš„å­—ç¬¦ä¸²æ—¶ï¼Œè¯¥å‡½æ•°å°†åŸºäºè¯¥å‚æ•°ä¸­å¼€å¤´è¿ç»­çš„æ•°å­—éƒ¨åˆ†è¿”å›ç»“æœï¼Œè¿˜è¿”å›ä¸€ä¸ªè­¦å‘Š `(Code 1292)`ã€‚ä¾‹å¦‚ï¼Œ`FORMAT('12.36q56.78', 1)` ä¸ `FORMAT('12.36', 1)` çš„è¿”å›çš„æ•°å­—ç»“æœç›¸åŒï¼Œä½† `FORMAT('12.36q56.78', 1)` è¿˜ä¼šåŒ…å«ä¸€ä¸ªè­¦å‘Š `Warning (Code 1292): Truncated incorrect DOUBLE value: '12.36q56.78'`ã€‚
- å¦‚æœè¾“å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ä¸ºé›¶æˆ–è´Ÿæ•°ï¼Œè¯¥å‡½æ•°å°†å››èˆäº”å…¥å°æ•°éƒ¨åˆ†å¹¶è¿”å›æ•´æ•°ã€‚
- å¦‚æœè¾“å…¥çš„ä»»æ„å‚æ•°ä¸º `NULL`ï¼Œå‡½æ•°å°†è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

æ ¼å¼åŒ–æ•°å­— 12.36 åˆ°ä¸åŒçš„å°æ•°ä½æ•°ï¼š

```sql
mysql> SELECT FORMAT(12.36, 1);
+------------------+
| FORMAT(12.36, 1) |
+------------------+
| 12.4             |
+------------------+
```

```sql
mysql> SELECT FORMAT(12.36, 5);
+------------------+
| FORMAT(12.36, 5) |
+------------------+
| 12.36000         |
+------------------+
```

```sql
mysql> SELECT FORMAT(1234.56, 1, 'en_US');
+-----------------------------+
| FORMAT(1234.56, 1, 'en_US') |
+-----------------------------+
| 1,234.6                     |
+-----------------------------+
```

### [`FROM_BASE64()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_from-base64)

`FROM_BASE64(str)` å‡½æ•°ç”¨äºå¯¹ [Base64](https://datatracker.ietf.org/doc/html/rfc4648) ç¼–ç çš„å­—ç¬¦ä¸²è¿›è¡Œè§£ç ï¼Œå¹¶å°†è§£ç ç»“æœä»¥åå…­è¿›åˆ¶å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ã€‚

- æ­¤å‡½æ•°æ¥å—ä¸€ä¸ªå•ä¸€å‚æ•°ï¼Œå³éœ€è¦è§£ç çš„ Base64 ç¼–ç å­—ç¬¦ä¸²ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸º `NULL` æˆ–æ— æ•ˆçš„ Base64 ç¼–ç å­—ç¬¦ä¸²ï¼Œ`FROM_BASE64()` å‡½æ•°å°†è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

ä»¥ä¸‹ç¤ºä¾‹è§£ç  Base64 ç¼–ç çš„å­—ç¬¦ä¸² `'SGVsbG8gVGlEQg=='`ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯ `'Hello TiDB'` ç»è¿‡ [`TO_BASE64()`](#to_base64) å‡½æ•°ç¼–ç çš„ç»“æœã€‚

```sql
mysql> SELECT TO_BASE64('Hello TiDB');
+-------------------------+
| TO_BASE64('Hello TiDB') |
+-------------------------+
| SGVsbG8gVGlEQg==        |
+-------------------------+

mysql> SELECT FROM_BASE64('SGVsbG8gVGlEQg==');
+------------------------------------------------------------------+
| FROM_BASE64('SGVsbG8gVGlEQg==')                                  |
+------------------------------------------------------------------+
| 0x48656C6C6F2054694442                                           |
+------------------------------------------------------------------+
```

```sql
mysql> SELECT CONVERT(FROM_BASE64('SGVsbG8gVGlEQg==') USING utf8mb4);
+--------------------------------------------------------+
| CONVERT(FROM_BASE64('SGVsbG8gVGlEQg==') USING utf8mb4) |
+--------------------------------------------------------+
| Hello TiDB                                             |
+--------------------------------------------------------+
```

ä»¥ä¸‹ç¤ºä¾‹è§£ç  Base64 ç¼–ç çš„æ•°å­— `MTIzNDU2`ï¼Œè¯¥å­—ç¬¦ä¸²æ˜¯ `123456` ç»è¿‡ [`TO_BASE64()`](#to_base64) å‡½æ•°ç¼–ç çš„ç»“æœã€‚

```sql
mysql> SELECT FROM_BASE64('MTIzNDU2');
+--------------------------------------------------+
| FROM_BASE64('MTIzNDU2')                          |
+--------------------------------------------------+
| 0x313233343536                                   |
+--------------------------------------------------+
```

### [`HEX()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_hex)

`HEX()` å‡½æ•°ç”¨äºå°†è¾“å…¥çš„å‚æ•°è½¬æ¢ä¸ºå…¶åå…­è¿›åˆ¶å€¼çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼ã€‚è¯¥å‚æ•°å¯ä»¥ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚

- å¦‚æœè¾“å…¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œ`HEX(str)` è¿”å› `str` çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤ºã€‚è¯¥å‡½æ•°å°† `str` ä¸­æ¯ä¸ªå­—ç¬¦çš„æ¯ä¸ªå­—èŠ‚è½¬æ¢ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—ã€‚ä¾‹å¦‚ï¼Œåœ¨ UTF-8 æˆ– ASCII å­—ç¬¦é›†ä¸­ï¼Œå­—ç¬¦ `a` çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸º `00111101`ï¼Œåå…­è¿›åˆ¶è¡¨ç¤ºä¸º `61`ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸ºæ•°å­—ï¼Œ`HEX(n)` è¿”å› `n` çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤ºã€‚è¯¥å‡½æ•°å°†å‚æ•° `n` è§†ä¸º `BIGINT` æ•°å­—ï¼Œç›¸å½“äº `CONV(n, 10, 16)`ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT X'616263', HEX('abc'), UNHEX(HEX('abc')), 0x616263;
+-----------+------------+-------------------+----------+
| X'616263' | HEX('abc') | UNHEX(HEX('abc')) | 0x616263 |
+-----------+------------+-------------------+----------+
| abc       | 616263     | abc               | abc      |
+-----------+------------+-------------------+----------+
```

```sql
SELECT X'F09F8DA3', HEX('ğŸ£'), UNHEX(HEX('ğŸ£')), 0xF09F8DA3;
+-------------+-------------+--------------------+------------+
| X'F09F8DA3' | HEX('ğŸ£')     | UNHEX(HEX('ğŸ£'))     | 0xF09F8DA3 |
+-------------+-------------+--------------------+------------+
| ğŸ£            | F09F8DA3    | ğŸ£                   | ğŸ£           |
+-------------+-------------+--------------------+------------+
```

```sql
SELECT HEX(255), CONV(HEX(255), 16, 10);
+----------+------------------------+
| HEX(255) | CONV(HEX(255), 16, 10) |
+----------+------------------------+
| FF       | 255                    |
+----------+------------------------+
```

```sql
SELECT HEX(NULL);
+-----------+
| HEX(NULL) |
+-----------+
| NULL      |
+-----------+
```

### [`INSERT()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_insert)

`INSERT(str, pos, len, newstr)` å‡½æ•°ç”¨äºå°†å­—ç¬¦ä¸² `str` ä¸­çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ï¼ˆä»ä½ç½® `pos` å¼€å§‹ï¼Œé•¿åº¦ä¸º `len`ï¼‰æ›¿æ¢ä¸ºå­—ç¬¦ä¸² `newstr`ã€‚è¯¥å‡½æ•°æ˜¯å¤šå­—èŠ‚å®‰å…¨çš„ã€‚

- å¦‚æœ `pos` è¶…è¿‡äº† `str` çš„é•¿åº¦ï¼Œå‡½æ•°è¿”å›åŸå§‹å­—ç¬¦ä¸² `str` è€Œä¸åšä¿®æ”¹ã€‚
- å¦‚æœ `len` è¶…è¿‡äº†ä»ä½ç½® `pos` å¼€å§‹çš„ `str` çš„å‰©ä½™é•¿åº¦ï¼Œå‡½æ•°å°†ä»ä½ç½® `pos` å¼€å§‹æ›¿æ¢å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†ã€‚
- å¦‚æœä»»ä¸€å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT INSERT('He likes tennis', 4, 5, 'plays');
+------------------------------------------+
| INSERT('He likes tennis', 4, 5, 'plays') |
+------------------------------------------+
| He plays tennis                          |
+------------------------------------------+
```

```sql
SELECT INSERT('He likes tennis', -1, 5, 'plays');
+-------------------------------------------+
| INSERT('He likes tennis', -1, 5, 'plays') |
+-------------------------------------------+
| He likes tennis                           |
+-------------------------------------------+
```

```sql
SELECT INSERT('He likes tennis', 4, 100, 'plays');
+--------------------------------------------+
| INSERT('He likes tennis', 4, 100, 'plays') |
+--------------------------------------------+
| He plays                                   |
+--------------------------------------------+
```

```sql
SELECT INSERT('He likes tennis', 10, 100, 'ğŸ£');
+-------------------------------------------+
| INSERT('He likes tennis', 10, 100, 'ğŸ£')     |
+-------------------------------------------+
| He likes ğŸ£                                 |
+-------------------------------------------+
```

```sql
SELECT INSERT('PingCAP æ•°æ®åº“', 1, 7, 'TiDB');
+-------------------------------------------+
| INSERT('PingCAP æ•°æ®åº“', 1, 7, 'TiDB')    |
+-------------------------------------------+
| TiDB æ•°æ®åº“                               |
+-------------------------------------------+
```

### [`INSTR()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_instr)

`INSTR(str, substr)` å‡½æ•°ç”¨äºè·å–å­å­—ç¬¦ä¸² `substr` åœ¨å­—ç¬¦ä¸² `str` ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚`substr` å’Œ `str` å‡å¯ä»¥ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚è¯¥å‡½æ•°ä¸ [`LOCATE(substr, str)`](#locate) å‡½æ•°çš„ä¸¤å‚æ•°ç‰ˆæœ¬åŠŸèƒ½ç›¸åŒï¼Œä½†å‚æ•°é¡ºåºç›¸åã€‚

> **æ³¨æ„ï¼š**
>
> `INSTR(str, substr)` å‡½æ•°æ˜¯å¦åŒºåˆ†å¤§å°å–å†³äº TiDB æ‰€ä½¿ç”¨çš„[æ’åºè§„åˆ™](/character-set-and-collation.md)ã€‚äºŒè¿›åˆ¶æ’åºè§„åˆ™ï¼ˆä»¥ `_bin` ä¸ºåç¼€ï¼‰åŒºåˆ†å¤§å°å†™ï¼Œè€Œé€šç”¨æ’åºè§„åˆ™ï¼ˆä»¥ `_general_ci` æˆ– `_ai_ci` ä¸ºåç¼€ï¼‰ä¸åŒºåˆ†å¤§å°å†™ã€‚

- å¦‚æœä»»ä¸€è¾“å…¥å‚æ•°ä¸ºæ•°å­—ï¼Œè¯¥å‡½æ•°å°†æ•°å­—è§†ä¸ºå­—ç¬¦ä¸²å¤„ç†ã€‚
- å¦‚æœ `substr` ä¸åœ¨ `str` ä¸­ï¼Œå‡½æ•°è¿”å› `0`ã€‚å¦åˆ™ï¼Œè¿”å› `substr` åœ¨ `str` ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚
- å¦‚æœä»»ä¸€å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT INSTR("pingcap.com", "tidb");
+------------------------------+
| INSTR("pingcap.com", "tidb") |
+------------------------------+
|                            0 |
+------------------------------+
```

```sql
SELECT INSTR("pingcap.com/tidb", "tidb");
+-----------------------------------+
| INSTR("pingcap.com/tidb", "tidb") |
+-----------------------------------+
|                                13 |
+-----------------------------------+
```

```sql
SELECT INSTR("pingcap.com/tidb" COLLATE utf8mb4_bin, "TiDB");
+-------------------------------------------------------+
| INSTR("pingcap.com/tidb" COLLATE utf8mb4_bin, "TiDB") |
+-------------------------------------------------------+
|                                                     0 |
+-------------------------------------------------------+
```

```sql
SELECT INSTR("pingcap.com/tidb" COLLATE utf8mb4_general_ci, "TiDB");
+--------------------------------------------------------------+
| INSTR("pingcap.com/tidb" COLLATE utf8mb4_general_ci, "TiDB") |
+--------------------------------------------------------------+
|                                                           13 |
+--------------------------------------------------------------+
```

```sql
SELECT INSTR(0123, "12");
+-------------------+
| INSTR(0123, "12") |
+-------------------+
|                 1 |
+-------------------+
```

### [`LCASE()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_lcase)

`LCASE(str)`å‡½æ•°ä¸ [`LOWER(str)`](#lower) å‡½æ•°åŠŸèƒ½ç›¸åŒï¼Œéƒ½æ˜¯è¿”å›è¾“å…¥å‚æ•°çš„å°å†™å½¢å¼ã€‚

### [`LEFT()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_left)

`LEFT()` å‡½æ•°ç”¨äºè¿”å›å­—ç¬¦ä¸²å·¦ä¾§æŒ‡å®šæ•°é‡çš„å­—ç¬¦ã€‚

è¯­æ³•ï¼š

```sql
LEFT(`str`, `len`)
```

- `str`ï¼šè¦æå–å­—ç¬¦çš„åŸå§‹å­—ç¬¦ä¸²ã€‚å¦‚æœ `str` åŒ…å«ä¸€ä¸ªå¤šå­—èŠ‚å­—ç¬¦ï¼Œè¯¥å‡½æ•°å°†å…¶è§†ä¸ºä¸€ä¸ªå­—ç¬¦ã€‚
- `len`ï¼šè¦è¿”å›çš„å­—ç¬¦é•¿åº¦ã€‚
    - å¦‚æœ `len` å°äºæˆ–ç­‰äº 0ï¼Œè¯¥å‡½æ•°è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚
    - å¦‚æœ `len` å¤§äºæˆ–ç­‰äº `str` çš„é•¿åº¦ï¼Œè¯¥å‡½æ•°å°†è¿”å›åŸå§‹çš„ `str`ã€‚
- å¦‚æœä»»ä½•å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT LEFT('ABCED', 3);
+------------------+
| LEFT('ABCED', 3) |
+------------------+
| ABC              |
+------------------+

SELECT LEFT('ABCED', 6);
+------------------+
| LEFT('ABCED', 6) |
+------------------+
| ABCED            |
+------------------+
```

```sql
SELECT LEFT('ABCED', 0);
+------------------+
| LEFT('ABCED', 0) |
+------------------+
|                  |
+------------------+

SELECT LEFT('ABCED', -1);
+-------------------+
| LEFT('ABCED', -1) |
+-------------------+
|                   |
+-------------------+
```

```sql
SELECT LEFT('ğŸ£ABC', 3);
+--------------------+
| LEFT('ğŸ£ABC', 3)     |
+--------------------+
| ğŸ£AB                 |
+--------------------+
```

```sql
SELECT LEFT('ABC', NULL);
+-------------------+
| LEFT('ABC', NULL) |
+-------------------+
| NULL              |
+-------------------+

SELECT LEFT(NULL, 3);
+------------------------------+
| LEFT(NULL, 3)                |
+------------------------------+
| NULL                         |
+------------------------------+
```

### [`LENGTH()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_length)

`LENGTH()` å‡½æ•°ç”¨äºè¿”å›å­—ç¬¦ä¸²çš„å­—èŠ‚é•¿åº¦ã€‚`LENGTH()` å°†å•ä¸ªå¤šå­—èŠ‚å­—ç¬¦è§†ä¸ºå¤šä¸ªå­—èŠ‚ï¼Œè€Œ `CHAR_LENGTH()` å°†å•ä¸ªå¤šå­—èŠ‚å­—ç¬¦è§†ä¸ºå•ä¸ªå­—ç¬¦ã€‚

å¦‚æœè¾“å…¥å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°å°†è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT LENGTH('ABC');
+---------------+
| LENGTH('ABC') |
+---------------+
|             3 |
+---------------+

SELECT LENGTH('ğŸ£ABC');
+-------------------+
| LENGTH('ğŸ£ABC')     |
+-------------------+
|                 7 |
+-------------------+

SELECT CHAR_LENGTH('ğŸ£ABC');
+------------------------+
| CHAR_LENGTH('ğŸ£ABC')     |
+------------------------+
|                      4 |
+------------------------+
```

```sql
SELECT LENGTH(NULL);
+--------------+
| LENGTH(NULL) |
+--------------+
|         NULL |
+--------------+
```

### [`LIKE`](https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_like)

`LIKE` ç”¨äºè¿›è¡Œç®€å•å­—ç¬¦ä¸²åŒ¹é…ã€‚è¡¨è¾¾å¼ `expr LIKE pat [ESCAPE 'escape_char']` è¿”å› `1` (`TRUE`) æˆ– `0` (`FALSE`)ã€‚å¦‚æœ `expr` æˆ– `pat` ä¸­ä»»ä¸€ä¸ªä¸º `NULL`ï¼Œç»“æœä¸º `NULL`ã€‚

ä½ å¯ä»¥åœ¨ `LIKE` ä¸­ä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªé€šé…ç¬¦ï¼š

- `%` åŒ¹é…ä»»æ„æ•°é‡çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬é›¶ä¸ªå­—ç¬¦ã€‚
- `_` ç²¾ç¡®åŒ¹é…ä¸€ä¸ªå­—ç¬¦ã€‚

ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨ `utf8mb4_bin` æ’åºè§„åˆ™ï¼š

```sql
SET collation_connection='utf8mb4_bin';
SHOW VARIABLES LIKE 'collation_connection';
+----------------------+-------------+
| Variable_name        | Value       |
+----------------------+-------------+
| collation_connection | utf8mb4_bin |
+----------------------+-------------+
```

```sql
SELECT NULL LIKE '%' as result;
+--------+
| result |
+--------+
|   NULL |
+--------+
```

```sql
SELECT 'sushi!!!' LIKE 'sushi_' AS result;
+--------+
| result |
+--------+
|      0 |
+--------+
```

```sql
SELECT 'ğŸ£ğŸºsushiğŸ£ğŸº' LIKE '%sushi%' AS result;
+--------+
| result |
+--------+
|      1 |
+--------+
```

```sql
SELECT 'ğŸ£ğŸºsushiğŸ£ğŸº' LIKE '%SUSHI%' AS result;
+--------+
| result |
+--------+
|      0 |
+--------+
```

```sql
SELECT 'ğŸ£ğŸºsushiğŸ£ğŸº' LIKE '%ğŸ£%' AS result;
+--------+
| result |
+--------+
|      1 |
+--------+
```

é»˜è®¤çš„è½¬ä¹‰å­—ç¬¦æ˜¯ `\`ï¼š

```sql
SELECT 'sushi!!!' LIKE 'sushi\_' AS result;
+--------+
| result |
+--------+
|      0 |
+--------+
```

```sql
SELECT 'sushi_' LIKE 'sushi\_' AS result;
+--------+
| result |
+--------+
|      1 |
+--------+
```

ä½ å¯ä»¥ä½¿ç”¨ `ESCAPE` å­å¥æŒ‡å®šä¸€ä¸ªä¸åŒçš„è½¬ä¹‰å­—ç¬¦ï¼Œä¾‹å¦‚ `*`ï¼š

```sql
SELECT 'sushi_' LIKE 'sushi*_' ESCAPE '*' AS result;
+--------+
| result |
+--------+
|      1 |
+--------+
```

```sql
SELECT 'sushi!' LIKE 'sushi*_' ESCAPE '*' AS result;
+--------+
| result |
+--------+
|      0 |
+--------+
```

ä½ å¯ä»¥ä½¿ç”¨ `LIKE` åŒ¹é…ä¸€ä¸ªæ•°å­—ï¼š

```sql
SELECT 10 LIKE '1%' AS result;
+--------+
| result |
+--------+
|      1 |
+--------+
```

```sql
SELECT 10000 LIKE '12%' AS result;
+--------+
| result |
+--------+
|      0 |
+--------+
```

ä½ å¯ä»¥ä½¿ç”¨ `COLLATE` æ˜¾å¼æŒ‡å®šä¸€ä¸ªæ’åºè§„åˆ™ï¼Œä¾‹å¦‚ `utf8mb4_unicode_ci`ï¼š

```sql
SELECT 'ğŸ£ğŸºSushiğŸ£ğŸº' COLLATE utf8mb4_unicode_ci LIKE '%SUSHI%' AS result;
+--------+
| result |
+--------+
|      1 |
+--------+
```

### [`LOCATE()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_locate)

`LOCATE(substr, str[, pos])` å‡½æ•°ç”¨äºè¿”å›å­å­—ç¬¦ä¸² `substr` åœ¨å­—ç¬¦ä¸² `str` ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®ã€‚`pos` å‚æ•°æ˜¯å¯é€‰çš„ï¼Œç”¨äºæŒ‡å®šæŸ¥æ‰¾çš„èµ·å§‹ä½ç½®ã€‚

- å¦‚æœå­å­—ç¬¦ä¸² `substr` ä¸åœ¨å­—ç¬¦ä¸² `str` ä¸­ï¼Œè¯¥å‡½æ•°è¿”å› `0`ã€‚
- å¦‚æœä»»ä¸€å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚
- è¯¥å‡½æ•°æ˜¯å¤šå­—èŠ‚å®‰å…¨çš„ï¼Œå¹¶ä¸”åªæœ‰å½“è‡³å°‘ä¸€ä¸ªå‚æ•°æ˜¯äºŒè¿›åˆ¶å­—ç¬¦ä¸²æ—¶ï¼Œæ‰æ‰§è¡ŒåŒºåˆ†å¤§å°å†™çš„æŸ¥æ‰¾ã€‚

ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨ `utf8mb4_bin` æ’åºè§„åˆ™ï¼š

```sql
SET collation_connection='utf8mb4_bin';
SHOW VARIABLES LIKE 'collation_connection';
+----------------------+-------------+
| Variable_name        | Value       |
+----------------------+-------------+
| collation_connection | utf8mb4_bin |
+----------------------+-------------+
```

```sql
SELECT LOCATE('bar', 'foobarbar');
+----------------------------+
| LOCATE('bar', 'foobarbar') |
+----------------------------+
|                          4 |
+----------------------------+
```

```sql
SELECT LOCATE('baz', 'foobarbar');
+----------------------------+
| LOCATE('baz', 'foobarbar') |
+----------------------------+
|                          0 |
+----------------------------+
```

```sql
SELECT LOCATE('bar', 'fooBARBAR');
+----------------------------+
| LOCATE('bar', 'fooBARBAR') |
+----------------------------+
|                          0 |
+----------------------------+
```

```sql
SELECT LOCATE('bar', 'foobarBAR', 100);
+---------------------------------+
| LOCATE('bar', 'foobarBAR', 100) |
+---------------------------------+
|                               0 |
+---------------------------------+
```

```sql
SELECT LOCATE('bar', 'foobarbar', 5);
+-------------------------------+
| LOCATE('bar', 'foobarbar', 5) |
+-------------------------------+
|                             7 |
+-------------------------------+
```

```sql
SELECT LOCATE('bar', NULL);
+---------------------+
| LOCATE('bar', NULL) |
+---------------------+
|                NULL |
+---------------------+
```

```sql
SELECT LOCATE('DB', 'TiDB tidb æ•°æ®åº“');
+-------------------------------------+
| LOCATE('DB', 'TiDB tidb æ•°æ®åº“')    |
+-------------------------------------+
|                                   3 |
+-------------------------------------+
```

```sql
SELECT LOCATE('DB', 'TiDB tidb æ•°æ®åº“', 4);
+----------------------------------------+
| LOCATE('DB', 'TiDB tidb æ•°æ®åº“', 4)    |
+----------------------------------------+
|                                      0 |
+----------------------------------------+
```

ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨ `utf8mb4_unicode_ci` æ’åºè§„åˆ™ï¼š

```sql
SET collation_connection='utf8mb4_unicode_ci';
SHOW VARIABLES LIKE 'collation_connection';
+----------------------+--------------------+
| Variable_name        | Value              |
+----------------------+--------------------+
| collation_connection | utf8mb4_unicode_ci |
+----------------------+--------------------+
```

```sql
SELECT LOCATE('DB', 'TiDB tidb æ•°æ®åº“', 4);
+----------------------------------------+
| LOCATE('DB', 'TiDB tidb æ•°æ®åº“', 4)    |
+----------------------------------------+
|                                      8 |
+----------------------------------------+
```

```sql
SELECT LOCATE('ğŸº', 'ğŸ£ğŸ£ğŸ£ğŸºğŸº');
+----------------------------------------+
| LOCATE('ğŸº', 'ğŸ£ğŸ£ğŸ£ğŸºğŸº')            |
+----------------------------------------+
|                                      1 |
+----------------------------------------+
```

ä»¥ä¸‹å¤šå­—èŠ‚å’ŒäºŒè¿›åˆ¶å­—ç¬¦ä¸²ç¤ºä¾‹ä½¿ç”¨ `utf8mb4_bin` æ’åºè§„åˆ™ï¼š

```sql
SET collation_connection='utf8mb4_bin';
SHOW VARIABLES LIKE 'collation_connection';
+----------------------+-------------+
| Variable_name        | Value       |
+----------------------+-------------+
| collation_connection | utf8mb4_bin |
+----------------------+-------------+
```

```sql
SELECT LOCATE('ğŸº', 'ğŸ£ğŸ£ğŸ£ğŸºğŸº');
+----------------------------------------+
| LOCATE('ğŸº', 'ğŸ£ğŸ£ğŸ£ğŸºğŸº')                         |
+----------------------------------------+
|                                      4 |
+----------------------------------------+
```

```sql
SELECT LOCATE('b', _binary'aBcde');
+-----------------------------+
| LOCATE('b', _binary'aBcde') |
+-----------------------------+
|                           0 |
+-----------------------------+
```

```sql
SELECT LOCATE('B', _binary'aBcde');
+-----------------------------+
| LOCATE('B', _binary'aBcde') |
+-----------------------------+
|                           2 |
+-----------------------------+
```

```sql
SELECT LOCATE(_binary'b', 'aBcde');
+-----------------------------+
| LOCATE(_binary'b', 'aBcde') |
+-----------------------------+
|                           0 |
+-----------------------------+
```

```sql
SELECT LOCATE(_binary'B', 'aBcde');
+-----------------------------+
| LOCATE(_binary'B', 'aBcde') |
+-----------------------------+
|                           2 |
+-----------------------------+
```

### [`LOWER()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_lower)

`LOWER(str)` å‡½æ•°ç”¨äºå°†è¾“å…¥çš„å‚æ•° `str` ä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå°å†™ã€‚è¯¥å‚æ•°å¯ä»¥ä¸ºå­—ç¬¦ä¸²æˆ–æ•°å­—ã€‚

- å¦‚æœè¾“å…¥å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œè¯¥å‡½æ•°è¿”å›å­—ç¬¦ä¸²çš„å°å†™å½¢å¼ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸ºæ•°å­—ï¼Œè¯¥å‡½æ•°å°†ä¼šå»æ‰è¯¥æ•°å­—ä¸­çš„å‰å¯¼é›¶ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT LOWER("TiDB");

+---------------+
| LOWER("TiDB") |
+---------------+
| tidb          |
+---------------+
```

```sql
SELECT LOWER(-012);

+-------------+
| LOWER(-012) |
+-------------+
| -12         |
+-------------+
```

### [`LPAD()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_lpad)

`LPAD(str, len, padstr)` å‡½æ•°è¿”å›å­—ç¬¦ä¸²å‚æ•°ï¼Œå·¦ä¾§å¡«å……æŒ‡å®šå­—ç¬¦ä¸² `padstr`ï¼Œç›´åˆ°å­—ç¬¦ä¸²é•¿åº¦è¾¾åˆ° `len` ä¸ªå­—ç¬¦ã€‚

- å¦‚æœ `len` å°äºå­—ç¬¦ä¸² `str` çš„é•¿åº¦ï¼Œå‡½æ•°å°†å­—ç¬¦ä¸² `str` æˆªæ–­åˆ°é•¿åº¦ `len`ã€‚
- å¦‚æœ `len` ä¸ºè´Ÿæ•°ï¼Œå‡½æ•°è¿”å› `NULL`ã€‚
- å¦‚æœä»»ä¸€å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

```sql
SELECT LPAD('TiDB',8,'>');
+--------------------+
| LPAD('TiDB',8,'>') |
+--------------------+
| >>>>TiDB           |
+--------------------+
1 row in set (0.00 sec)
```

```sql
SELECT LPAD('TiDB',2,'>');
+--------------------+
| LPAD('TiDB',2,'>') |
+--------------------+
| Ti                 |
+--------------------+
1 row in set (0.00 sec)
```

```sql
SELECT LPAD('TiDB',-2,'>');
+---------------------+
| LPAD('TiDB',-2,'>') |
+---------------------+
| NULL                |
+---------------------+
1 row in set (0.00 sec)
```

### [`LTRIM()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_ltrim)

å»æ‰å‰ç¼€ç©ºæ ¼

### [`MAKE_SET()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_make-set)

è¿”å›ä¸€ç»„ç”¨é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²ï¼Œè¿™äº›å­—ç¬¦ä¸²çš„ä½æ•°ä¸ç»™å®šçš„ bits å‚æ•°å¯¹åº”

### [`MID()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_mid)

è¿”å›ä¸€ä¸ªä»¥æŒ‡å®šä½ç½®å¼€å§‹çš„å­å­—ç¬¦ä¸²

### [`NOT LIKE`](https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#operator_not-like)

å¦å®šç®€å•æ¨¡å¼åŒ¹é…

### [`NOT REGEXP`](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#operator_not-regexp)

`REGEXP` çš„å¦å®šå½¢å¼

### [`OCT()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_oct)

è¿”å›ä¸€ä¸ªæ•°å€¼çš„å…«è¿›åˆ¶è¡¨ç¤ºï¼Œå½¢å¼ä¸ºå­—ç¬¦ä¸²

### [`OCTET_LENGTH()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_octet-length)

ä¸ `LENGTH()` åŠŸèƒ½ç›¸åŒ

### [`ORD()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_ord)

è¿”å›è¯¥å‚æ•°æœ€å·¦ä¾§å­—ç¬¦çš„å­—ç¬¦ç¼–ç 

### [`POSITION()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_position)

ä¸ `LOCATE()` åŠŸèƒ½ç›¸åŒ

### [`QUOTE()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_quote)

ä½¿å‚æ•°é€ƒé€¸ï¼Œä¸ºäº†åœ¨ SQL è¯­å¥ä¸­ä½¿ç”¨

### [`REGEXP`](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#operator_regexp)

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ¨¡å¼

### [`REGEXP_INSTR()`](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-instr)

è¿”å›æ»¡è¶³æ­£åˆ™çš„å­å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªç´¢å¼•ä½ç½®ï¼ˆä¸ MySQL ä¸å®Œå…¨å…¼å®¹ï¼Œå…·ä½“è¯·å‚è€ƒ[æ­£åˆ™å‡½æ•°ä¸ MySQL çš„å…¼å®¹æ€§](#æ­£åˆ™å‡½æ•°ä¸-mysql-çš„å…¼å®¹æ€§)ï¼‰

### [`REGEXP_LIKE()`](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-like)

åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼ï¼ˆä¸ MySQL ä¸å®Œå…¨å…¼å®¹ï¼Œå…·ä½“è¯·å‚è€ƒ[æ­£åˆ™å‡½æ•°ä¸ MySQL çš„å…¼å®¹æ€§](#æ­£åˆ™å‡½æ•°ä¸-mysql-çš„å…¼å®¹æ€§)ï¼‰

### [`REGEXP_REPLACE()`](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-replace)

æ›¿æ¢æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²ï¼ˆä¸ MySQL ä¸å®Œå…¨å…¼å®¹ï¼Œå…·ä½“è¯·å‚è€ƒ[æ­£åˆ™å‡½æ•°ä¸ MySQL çš„å…¼å®¹æ€§](#æ­£åˆ™å‡½æ•°ä¸-mysql-çš„å…¼å®¹æ€§)ï¼‰

### [`REGEXP_SUBSTR()`](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#function_regexp-substr)

è¿”å›æ»¡è¶³æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²ï¼ˆä¸ MySQL ä¸å®Œå…¨å…¼å®¹ï¼Œå…·ä½“è¯·å‚è€ƒ[æ­£åˆ™å‡½æ•°ä¸ MySQL çš„å…¼å®¹æ€§](#æ­£åˆ™å‡½æ•°ä¸-mysql-çš„å…¼å®¹æ€§)ï¼‰

### [`REPEAT()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_repeat)

`REPEAT()` å‡½æ•°ç”¨äºä»¥æŒ‡å®šæ¬¡æ•°é‡å¤ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

ç¤ºä¾‹ï¼š

ä»¥ä¸‹ç¤ºä¾‹ä½¿ç”¨[é€’å½’çš„å…¬å…±è¡¨è¾¾å¼ (CTE)](/develop/dev-guide-use-common-table-expression.md#é€’å½’çš„-cte) ç”Ÿæˆä» 1 åˆ° 20 çš„æ•°å­—åºåˆ—ï¼Œå¹¶ä½¿ç”¨ `REPEAT()` å‡½æ•°é‡å¤å¯¹åº”æ¬¡æ•°çš„ `x` å­—ç¬¦ä¸²ï¼š

```sql
WITH RECURSIVE nr(n) AS (
    SELECT 1 AS n 
    UNION ALL 
    SELECT n+1 FROM nr WHERE n<20
)
SELECT n, REPEAT('x',n) FROM nr;
```

```
+------+----------------------+
| n    | REPEAT('x',n)        |
+------+----------------------+
|    1 | x                    |
|    2 | xx                   |
|    3 | xxx                  |
|    4 | xxxx                 |
|    5 | xxxxx                |
|    6 | xxxxxx               |
|    7 | xxxxxxx              |
|    8 | xxxxxxxx             |
|    9 | xxxxxxxxx            |
|   10 | xxxxxxxxxx           |
|   11 | xxxxxxxxxxx          |
|   12 | xxxxxxxxxxxx         |
|   13 | xxxxxxxxxxxxx        |
|   14 | xxxxxxxxxxxxxx       |
|   15 | xxxxxxxxxxxxxxx      |
|   16 | xxxxxxxxxxxxxxxx     |
|   17 | xxxxxxxxxxxxxxxxx    |
|   18 | xxxxxxxxxxxxxxxxxx   |
|   19 | xxxxxxxxxxxxxxxxxxx  |
|   20 | xxxxxxxxxxxxxxxxxxxx |
+------+----------------------+
20 rows in set (0.01 sec)
```

ä»¥ä¸‹ç¤ºä¾‹æ¼”ç¤ºäº† `REPEAT()` å¯ä»¥å¤„ç†åŒ…å«å¤šä¸ªå­—ç¬¦çš„å­—ç¬¦ä¸²ã€‚

```sql
SELECT REPEAT('ha',3);
```

```
+----------------+
| REPEAT('ha',3) |
+----------------+
| hahaha         |
+----------------+
1 row in set (0.00 sec)
```

### [`REPLACE()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_replace)

æ›¿æ¢æ‰€æœ‰å‡ºç°çš„æŒ‡å®šå­—ç¬¦ä¸²

### [`REVERSE()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_reverse)

åè½¬å­—ç¬¦ä¸²é‡Œçš„æ‰€æœ‰å­—ç¬¦

### [`RIGHT()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_right)

è¿”å›æŒ‡å®šæ•°é‡çš„æœ€å³ä¾§çš„å­—ç¬¦

### [`RLIKE`](https://dev.mysql.com/doc/refman/8.0/en/regexp.html#operator_regexp)

ä¸ `REGEXP` åŠŸèƒ½ç›¸åŒ

### [`RPAD()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_rpad)

ä»¥æŒ‡å®šæ¬¡æ•°æ·»åŠ å­—ç¬¦ä¸²

### [`RTRIM()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_rtrim)

å»æ‰åç¼€ç©ºæ ¼

### [`SPACE()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_space)

è¿”å›æŒ‡å®šæ•°é‡çš„ç©ºæ ¼ï¼Œå½¢å¼ä¸ºå­—ç¬¦ä¸²

### [`STRCMP()`](https://dev.mysql.com/doc/refman/8.0/en/string-comparison-functions.html#function_strcmp)

æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²

### [`SUBSTR()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substr)

è¿”å›æŒ‡å®šçš„å­å­—ç¬¦ä¸²

### [`SUBSTRING()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substring)

è¿”å›æŒ‡å®šçš„å­å­—ç¬¦ä¸²

### [`SUBSTRING_INDEX()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_substring-index)

`SUBSTRING_INDEX()` å‡½æ•°ç”¨äºæŒ‰ç…§æŒ‡å®šçš„åˆ†éš”ç¬¦å’Œæ¬¡æ•°ä»å­—ç¬¦ä¸²ä¸­æå–å­å­—ç¬¦ä¸²ã€‚è¯¥å‡½æ•°åœ¨å¤„ç†ä»¥ç‰¹å®šåˆ†éš”ç¬¦åˆ†éš”çš„æ•°æ®æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œä¾‹å¦‚è§£æ CSV æ•°æ®æˆ–å¤„ç†æ—¥å¿—æ–‡ä»¶ã€‚

è¯­æ³•ï¼š

```sql
SUBSTRING_INDEX(str, delim, count)
```

- `str`ï¼šè¦å¤„ç†çš„å­—ç¬¦ä¸²ã€‚
- `delim`ï¼šæŒ‡å®šå­—ç¬¦ä¸²ä¸­çš„åˆ†éš”ç¬¦ï¼Œå¤§å°å†™æ•æ„Ÿã€‚
- `count`ï¼šæŒ‡å®šåˆ†éš”ç¬¦å‡ºç°çš„æ¬¡æ•°ã€‚
    - å¦‚æœ `count` ä¸ºæ­£æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä»å­—ç¬¦ä¸²å·¦è¾¹å¼€å§‹çš„ç¬¬ `count` ä¸ªåˆ†éš”ç¬¦ä¹‹å‰çš„å­å­—ç¬¦ä¸²ã€‚
    - å¦‚æœ `count` ä¸ºè´Ÿæ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä»å­—ç¬¦ä¸²å³è¾¹å¼€å§‹çš„ç¬¬ `count` ä¸ªåˆ†éš”ç¬¦ä¹‹åçš„å­å­—ç¬¦ä¸²ã€‚
    - å¦‚æœ `count` ä¸º `0`ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚

æŸ¥è¯¢ç¤ºä¾‹ 1ï¼š

```sql
SELECT SUBSTRING_INDEX('www.tidbcloud.com', '.', 2);
```

è¿”å›ç»“æœ 1ï¼š

```sql
+-----------------------------------------+
| SUBSTRING_INDEX('www.tidbcloud.com', '.', 2) |
+-----------------------------------------+
| www.tidbcloud                                |
+-----------------------------------------+
```

æŸ¥è¯¢ç¤ºä¾‹ 2ï¼š

```sql
SELECT SUBSTRING_INDEX('www.tidbcloud.com', '.', -1);
```

è¿”å›ç»“æœ 2ï¼š

```sql
+------------------------------------------+
| SUBSTRING_INDEX('www.tidbcloud.com', '.', -1) |
+------------------------------------------+
| com                                      |
+------------------------------------------+
```

### [`TO_BASE64()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_to-base64)

`TO_BASE64()` å‡½æ•°ç”¨äºå°†è¾“å…¥çš„å‚æ•°è½¬æ¢ä¸º base-64 ç¼–ç å½¢å¼çš„å­—ç¬¦ä¸²ï¼Œå¹¶æŒ‰ç…§å½“å‰è¿æ¥çš„å­—ç¬¦é›†å’Œæ’åºè§„åˆ™è¿”å›ç»“æœã€‚base-64 ç¼–ç çš„å­—ç¬¦ä¸²å¯ä»¥ä½¿ç”¨ [`FROM_BASE64()`](#from_base64) å‡½æ•°è¿›è¡Œè§£ç ã€‚

è¯­æ³•ï¼š

```sql
TO_BASE64(str)
```

- å¦‚æœè¾“å…¥å‚æ•°ä¸æ˜¯å­—ç¬¦ä¸²ï¼Œè¯¥å‡½æ•°ä¼šå°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²åå†è¿›è¡Œ base-64 ç¼–ç ã€‚
- å¦‚æœè¾“å…¥å‚æ•°ä¸º `NULL`ï¼Œè¯¥å‡½æ•°è¿”å› `NULL`ã€‚

æŸ¥è¯¢ç¤ºä¾‹ 1ï¼š

```sql
SELECT TO_BASE64('abc');
```

è¿”å›ç»“æœ 1ï¼š

```sql
+------------------+
| TO_BASE64('abc') |
+------------------+
| YWJj             |
+------------------+
```

æŸ¥è¯¢ç¤ºä¾‹ 2ï¼š

```sql
SELECT TO_BASE64(6);
```

è¿”å›ç»“æœ 2ï¼š

```sql
+--------------+
| TO_BASE64(6) |
+--------------+
| Ng==         |
+--------------+
```

### [`TRANSLATE()`](https://docs.oracle.com/en/database/oracle/oracle-database/21/sqlrf/TRANSLATE.html#GUID-80F85ACB-092C-4CC7-91F6-B3A585E3A690)

å°†å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€æœ‰æŒ‡å®šå­—ç¬¦æ›¿æ¢ä¸ºå…¶å®ƒå­—ç¬¦ã€‚è¿™ä¸ªå‡½æ•°ä¸ä¼šåƒ Oracle ä¸€æ ·å°†ç©ºå­—ç¬¦ä¸²è§†ä¸º`NULL`

### [`TRIM()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_trim)

å»æ‰å‰ç¼€å’Œåç¼€ç©ºæ ¼

### [`UCASE()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_ucase)

`UCASE()` å‡½æ•°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™å­—æ¯ï¼Œæ­¤å‡½æ•°ç­‰ä»·äº `UPPER()` å‡½æ•°ã€‚

> **æ³¨æ„ï¼š**
>
> å½“å­—ç¬¦ä¸²ä¸º null æ—¶ï¼Œåˆ™è¿”å› `NULL`ã€‚

æŸ¥è¯¢ç¤ºä¾‹ï¼š

```sql
SELECT UCASE('bigdata') AS result_upper, UCASE(null) AS result_null;
```

è¿”å›ç»“æœï¼š

```sql
+--------------+-------------+
| result_upper | result_null |
+--------------+-------------+
| BIGDATA      | NULL        |
+--------------+-------------+
```

### [`UNHEX()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_unhex)

`UNHEX()` å‡½æ•°æ‰§è¡Œ `HEX()` å‡½æ•°çš„é€†è¿ç®—ï¼Œå°†å‚æ•°ä¸­çš„æ¯å¯¹å­—ç¬¦è§†ä¸ºåå…­è¿›åˆ¶æ•°å­—ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºè¯¥æ•°å­—è¡¨ç¤ºçš„å­—ç¬¦ï¼Œè¿”å›å€¼ä¸ºäºŒè¿›åˆ¶å­—ç¬¦ä¸²ã€‚

> **æ³¨æ„ï¼š**
>
> ä¼ å…¥çš„å­—ç¬¦ä¸²å¿…é¡»æ˜¯åˆæ³•çš„åå…­è¿›åˆ¶æ•°å€¼ï¼ŒåŒ…å« `0~9`ã€`A~F`ã€`a~f`ï¼Œå¦‚æœä¸º `NULL` æˆ–è¶…å‡ºè¯¥èŒƒå›´ï¼Œåˆ™è¿”å› `NULL`ã€‚

æŸ¥è¯¢ç¤ºä¾‹ï¼š

```sql
SELECT UNHEX('54694442');
```

è¿”å›ç»“æœï¼š

```sql
+--------------------------------------+
| UNHEX('54694442')                    |
+--------------------------------------+
| 0x54694442                           |
+--------------------------------------+
```

### [`UPPER()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_upper)

`UPPER()` å‡½æ•°å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºå¤§å†™å­—æ¯ï¼Œæ­¤å‡½æ•°ç­‰ä»·äº `UCASE()` å‡½æ•°ã€‚

> **æ³¨æ„ï¼š**
>
> å½“å­—ç¬¦ä¸²ä¸º null æ—¶ï¼Œåˆ™è¿”å› `NULL`ã€‚

æŸ¥è¯¢ç¤ºä¾‹ï¼š

```sql
SELECT UPPER('bigdata') AS result_upper, UPPER(null) AS result_null;
```

è¿”å›ç»“æœï¼š

```sql
+--------------+-------------+
| result_upper | result_null |
+--------------+-------------+
| BIGDATA      | NULL        |
+--------------+-------------+
```

### [`WEIGHT_STRING()`](https://dev.mysql.com/doc/refman/8.0/en/string-functions.html#function_weight-string)

`WEIGHT_STRING()` å‡½æ•°è¿”å›å­—ç¬¦ä¸²çš„æƒé‡ï¼ˆäºŒè¿›åˆ¶å­—ç¬¦ï¼‰ï¼Œä¸»è¦ç”¨äºå¤šå­—ç¬¦é›†åœºæ™¯ä¸‹çš„æ’åºå’Œæ¯”è¾ƒæ“ä½œã€‚å¦‚æœå‚æ•°ä¸º `NULL`ï¼Œåˆ™è¿”å› `NULL`ã€‚è¯­æ³•ç¤ºä¾‹å¦‚ä¸‹ï¼š

```sql
WEIGHT_STRING(str [AS {CHAR|BINARY}(N)])
```

* `str`ï¼šå­—ç¬¦ä¸²è¡¨è¾¾å¼ã€‚å¦‚æœæ˜¯éäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ CHARã€VARCHAR æˆ– TEXT å€¼ï¼Œåˆ™è¿”å›å€¼åŒ…å«è¯¥å­—ç¬¦ä¸²çš„æ’åºè§„åˆ™æƒé‡ï¼›å¦‚æœæ˜¯äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚ BINARYã€VARBINARY æˆ– BLOB å€¼ï¼Œåˆ™è¿”å›å€¼ä¸è¾“å…¥ç›¸åŒã€‚
* `AS {CHAR|BINARY}(N)`ï¼šå¯é€‰å‚æ•°ï¼Œç”¨äºæŒ‡å®šè¾“å‡ºç»“æœçš„ç±»å‹å’Œé•¿åº¦ã€‚`CHAR` è¡¨ç¤ºå­—ç¬¦æ•°æ®ç±»å‹ï¼Œè€Œ `BINARY` è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®ç±»å‹ï¼›`N` æŒ‡å®šè¾“å‡ºçš„é•¿åº¦ï¼Œå–å€¼ä¸ºå¤§äºç­‰äº 1 çš„æ•´æ•°ã€‚

> **æ³¨æ„ï¼š**
>
> å½“ `N` å°äºå­—ç¬¦ä¸²é•¿åº¦æ—¶ï¼Œå­—ç¬¦ä¸²å°†è¢«æˆªæ–­ï¼›å½“ `N` è¶…è¿‡å­—ç¬¦ä¸²é•¿åº¦æ—¶ï¼Œ`CHAR` ç±»å‹å°†ç”¨ç©ºæ ¼æ¥å¡«å……ä»¥è¾¾åˆ°æŒ‡å®šé•¿åº¦ï¼Œ`BINARY` ç±»å‹å°†ä»¥ `0x00` æ¥å¡«å……ä»¥è¾¾åˆ°æŒ‡å®šé•¿åº¦ã€‚

æŸ¥è¯¢ç¤ºä¾‹ï¼š

```sql
SET NAMES 'utf8mb4';
SELECT HEX(WEIGHT_STRING('ab' AS CHAR(3))) AS char_result, HEX(WEIGHT_STRING('ab' AS BINARY(3))) AS binary_result;
```

è¿”å›ç»“æœï¼š

```sql
+-------------+---------------+
| char_result | binary_result |
+-------------+---------------+
| 6162        | 616200        |
+-------------+---------------+
```

## ä¸æ”¯æŒçš„å‡½æ•°

* `LOAD_FILE()`
* `MATCH()`
* `SOUNDEX()`

## æ­£åˆ™å‡½æ•°ä¸ MySQL çš„å…¼å®¹æ€§

æœ¬èŠ‚ä»‹ç» TiDB ä¸­æ­£åˆ™å‡½æ•° `REGEXP_INSTR()`ã€`REGEXP_LIKE()`ã€`REGEXP_REPLACE()`ã€`REGEXP_SUBSTR()` ä¸ MySQL çš„å…¼å®¹æƒ…å†µã€‚

### è¯­æ³•å…¼å®¹æ€§

MySQL çš„å®ç°ä½¿ç”¨çš„æ˜¯ [ICU](https://github.com/unicode-org/icu) (International Components for Unicode) åº“ï¼ŒTiDB çš„å®ç°ä½¿ç”¨çš„æ˜¯ [RE2](https://github.com/google/re2) åº“ï¼Œä¸¤ä¸ªåº“ä¹‹é—´çš„è¯­æ³•å·®å¼‚å¯ä»¥æŸ¥é˜… [ICU æ–‡æ¡£](https://unicode-org.github.io/icu/userguide/)å’Œ [RE2 æ–‡æ¡£](https://github.com/google/re2/wiki/Syntax)ã€‚

### åŒ¹é…æ¨¡å¼ `match_type` å…¼å®¹æ€§

TiDB ä¸ MySQL åœ¨ `match_type` ä¸Šçš„å·®å¼‚ï¼š

- TiDB ä¸­ `match_type` å¯é€‰å€¼ä¸ºï¼š`"c"`ã€`"i"`ã€`"m"`ã€`"s"`ã€‚MySQL ä¸­ `match_type` å¯é€‰å€¼ä¸ºï¼š`"c"`ã€`"i"`ã€`"m"`ã€`"n"`ã€`"u"`ã€‚
- TiDB ä¸­ `"s"` å¯¹åº” MySQL ä¸­çš„ `"n"`ï¼Œå³ `.` å­—ç¬¦åŒ¹é…è¡Œç»“æŸç¬¦ã€‚

    ä¾‹å¦‚ï¼šMySQL ä¸­ `SELECT REGEXP_LIKE(a, b, "n") FROM t1;` åœ¨ TiDB ä¸­éœ€è¦ä¿®æ”¹ä¸º `SELECT REGEXP_LIKE(a, b, "s") FROM t1;`ã€‚

- TiDB ä¸æ”¯æŒ `match_type` ä¸º `"u"`ã€‚

### æ•°æ®ç±»å‹å…¼å®¹æ€§

TiDB ä¸ MySQL åœ¨äºŒè¿›åˆ¶å­—ç¬¦ä¸² (binary string) æ•°æ®ç±»å‹ä¸Šçš„å·®å¼‚ï¼š

- MySQL 8.0.22 åŠä»¥ä¸Šç‰ˆæœ¬ä¸­æ­£åˆ™å‡½æ•°ä¸æ”¯æŒäºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå…·ä½“ä¿¡æ¯å¯æŸ¥çœ‹ [MySQL æ–‡æ¡£](https://dev.mysql.com/doc/refman/8.0/en/regexp.html)ã€‚ä½†åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ‰€æœ‰å‚æ•°æˆ–è€…è¿”å›å€¼çš„æ•°æ®ç±»å‹éƒ½æ˜¯äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œåˆ™æ­£åˆ™å‡½æ•°å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œå¦åˆ™æŠ¥é”™ã€‚
- TiDB ç›®å‰å®Œå…¨ç¦æ­¢ä½¿ç”¨äºŒè¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ— è®ºä»€ä¹ˆæƒ…å†µéƒ½ä¼šæŠ¥é”™ã€‚

### å…¶å®ƒå…¼å®¹æ€§

TiDB ä¸ MySQL åœ¨æ›¿æ¢ç©ºå­—ç¬¦ä¸²ä¸Šçš„å·®å¼‚ï¼š

ä¸‹é¢ä»¥ `REGEXP_REPLACE("", "^$", "123")` ä¸ºä¾‹ï¼š

- MySQL ä¸ä¼šå¯¹ç©ºä¸²è¿›è¡Œæ›¿æ¢ï¼Œå…¶ç»“æœä¸º `""`ã€‚
- TiDB ä¼šå¯¹ç©ºä¸²è¿›è¡Œæ›¿æ¢ï¼Œå…¶ç»“æœä¸º `"123"`ã€‚
