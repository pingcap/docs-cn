---
title: æœç´¢ JSON å€¼çš„ JSON å‡½æ•°
summary: äº†è§£ç”¨äºæœç´¢ JSON å€¼çš„ JSON å‡½æ•°ã€‚
---

# æœç´¢ JSON å€¼çš„ JSON å‡½æ•°

æœ¬æ–‡æ¡£æè¿°äº†ç”¨äºæœç´¢ JSON å€¼çš„ JSON å‡½æ•°ã€‚

## [JSON_CONTAINS()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains)

`JSON_CONTAINS(json_doc, candidate [,path])` å‡½æ•°é€šè¿‡è¿”å› `1` æˆ– `0` æ¥æŒ‡ç¤ºç»™å®šçš„ `candidate` JSON æ–‡æ¡£æ˜¯å¦åŒ…å«åœ¨ç›®æ ‡ JSON æ–‡æ¡£ä¸­ã€‚

ç¤ºä¾‹ï¼š

è¿™é‡Œ `a` åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('["a","b","c"]','"a"');
```

```
+--------------------------------------+
| JSON_CONTAINS('["a","b","c"]','"a"') |
+--------------------------------------+
|                                    1 |
+--------------------------------------+
1 row in set (0.00 sec)
```

è¿™é‡Œ `e` ä¸åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('["a","b","c"]','"e"');
```

```
+--------------------------------------+
| JSON_CONTAINS('["a","b","c"]','"e"') |
+--------------------------------------+
|                                    0 |
+--------------------------------------+
1 row in set (0.00 sec)
```

è¿™é‡Œ `{"foo": "bar"}` åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('{"foo": "bar", "aaa": 5}','{"foo": "bar"}');
```

```
+------------------------------------------------------------+
| JSON_CONTAINS('{"foo": "bar", "aaa": 5}','{"foo": "bar"}') |
+------------------------------------------------------------+
|                                                          1 |
+------------------------------------------------------------+
1 row in set (0.00 sec)
```

è¿™é‡Œ `"bar"` ä¸åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£çš„æ ¹éƒ¨ã€‚

```sql
SELECT JSON_CONTAINS('{"foo": "bar", "aaa": 5}','"bar"');
```

```
+---------------------------------------------------+
| JSON_CONTAINS('{"foo": "bar", "aaa": 5}','"bar"') |
+---------------------------------------------------+
|                                                 0 |
+---------------------------------------------------+
1 row in set (0.00 sec)
```

è¿™é‡Œ `"bar"` åŒ…å«åœ¨ç›®æ ‡æ–‡æ¡£çš„ `$.foo` å±æ€§ä¸­ã€‚

```sql
SELECT JSON_CONTAINS('{"foo": "bar", "aaa": 5}','"bar"', '$.foo');
```

```
+------------------------------------------------------------+
| JSON_CONTAINS('{"foo": "bar", "aaa": 5}','"bar"', '$.foo') |
+------------------------------------------------------------+
|                                                          1 |
+------------------------------------------------------------+
1 row in set (0.00 sec)
```

## [JSON_CONTAINS_PATH()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-contains-path)

`JSON_CONTAINS_PATH(json_doc, all_or_one, path [,path, ...])` å‡½æ•°è¿”å› `0` æˆ– `1` æ¥æŒ‡ç¤º JSON æ–‡æ¡£åœ¨ç»™å®šè·¯å¾„æˆ–å¤šä¸ªè·¯å¾„ä¸Šæ˜¯å¦åŒ…å«æ•°æ®ã€‚

ç¤ºä¾‹ï¼š

è¿™é‡Œæ–‡æ¡£åŒ…å« `$.foo`ã€‚

```sql
SELECT JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.foo');
```

```
+--------------------------------------------------------------+
| JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.foo') |
+--------------------------------------------------------------+
|                                                            1 |
+--------------------------------------------------------------+
1 row in set (0.00 sec)
```

è¿™é‡Œæ–‡æ¡£ä¸åŒ…å« `$.bar`ã€‚

```sql
SELECT JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.bar');
```

```
+--------------------------------------------------------------+
| JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.bar') |
+--------------------------------------------------------------+
|                                                            0 |
+--------------------------------------------------------------+
1 row in set (0.00 sec)
```

è¿™é‡Œæ–‡æ¡£åŒæ—¶åŒ…å« `$.foo` å’Œ `$.aaa`ã€‚

```sql
SELECT JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.foo', '$.aaa');
```

```
+-----------------------------------------------------------------------+
| JSON_CONTAINS_PATH('{"foo": "bar", "aaa": 5}','all','$.foo', '$.aaa') |
+-----------------------------------------------------------------------+
|                                                                     1 |
+-----------------------------------------------------------------------+
1 row in set (0.00 sec)
```

## [JSON_EXTRACT()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-extract)

`JSON_EXTRACT(json_doc, path[, path] ...)` å‡½æ•°ä» JSON æ–‡æ¡£ä¸­æå–æ•°æ®ï¼Œé€‰æ‹©ç”± `path` å‚æ•°åŒ¹é…çš„æ–‡æ¡£éƒ¨åˆ†ã€‚

```sql
SELECT JSON_EXTRACT('{"foo": "bar", "aaa": 5}', '$.foo');
```

```
+---------------------------------------------------+
| JSON_EXTRACT('{"foo": "bar", "aaa": 5}', '$.foo') |
+---------------------------------------------------+
| "bar"                                             |
+---------------------------------------------------+
1 row in set (0.00 sec)
```

## [->](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#operator_json-column-path)

`column->path` å‡½æ•°è¿”å› `column` ä¸­åŒ¹é… `path` å‚æ•°çš„æ•°æ®ã€‚å®ƒæ˜¯ [`JSON_EXTRACT()`](#json_extract) çš„åˆ«åã€‚

```sql
SELECT
    j->'$.foo',
    JSON_EXTRACT(j, '$.foo')
FROM (
    SELECT
        '{"foo": "bar", "aaa": 5}' AS j
    ) AS tbl;
```

```
+------------+--------------------------+
| j->'$.foo' | JSON_EXTRACT(j, '$.foo') |
+------------+--------------------------+
| "bar"      | "bar"                    |
+------------+--------------------------+
1 row in set (0.00 sec)
```

## [->>](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#operator_json-inline-path)

`column->>path` å‡½æ•°å¯¹ `column` ä¸­åŒ¹é… `path` å‚æ•°çš„æ•°æ®è¿›è¡Œå»å¼•å·å¤„ç†ã€‚å®ƒæ˜¯ `JSON_UNQUOTE(JSON_EXTRACT(doc, path_literal))` çš„åˆ«åã€‚

```sql
SELECT
    j->'$.foo',
    JSON_EXTRACT(j, '$.foo')
    j->>'$.foo',
    JSON_UNQUOTE(JSON_EXTRACT(j, '$.foo'))
FROM (
    SELECT
        '{"foo": "bar", "aaa": 5}' AS j
    ) AS tbl;
```

```
+------------+--------------------------+-------------+----------------------------------------+
| j->'$.foo' | JSON_EXTRACT(j, '$.foo') | j->>'$.foo' | JSON_UNQUOTE(JSON_EXTRACT(j, '$.foo')) |
+------------+--------------------------+-------------+----------------------------------------+
| "bar"      | "bar"                    | bar         | bar                                    |
+------------+--------------------------+-------------+----------------------------------------+
1 row in set (0.00 sec)
```

## [JSON_KEYS()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-keys)

`JSON_KEYS(json_doc [,path])` å‡½æ•°ä»¥ JSON æ•°ç»„çš„å½¢å¼è¿”å› JSON å¯¹è±¡çš„é¡¶å±‚é”®ã€‚å¦‚æœæä¾›äº† `path` å‚æ•°ï¼Œå®ƒå°†è¿”å›æ‰€é€‰è·¯å¾„ä¸­çš„é¡¶å±‚é”®ã€‚

ç¤ºä¾‹ï¼š

ä»¥ä¸‹ç¤ºä¾‹è¿”å› JSON æ–‡æ¡£ä¸­çš„ä¸¤ä¸ªé¡¶å±‚é”®ã€‚

```sql
SELECT JSON_KEYS('{"name": {"first": "John", "last": "Doe"}, "type": "Person"}');
```

```
+---------------------------------------------------------------------------+
| JSON_KEYS('{"name": {"first": "John", "last": "Doe"}, "type": "Person"}') |
+---------------------------------------------------------------------------+
| ["name", "type"]                                                          |
+---------------------------------------------------------------------------+
1 row in set (0.00 sec)
```

ä»¥ä¸‹ç¤ºä¾‹è¿”å› JSON æ–‡æ¡£ä¸­ `$.name` è·¯å¾„ä¸‹çš„é¡¶å±‚é”®ã€‚

```sql
SELECT JSON_KEYS('{"name": {"first": "John", "last": "Doe"}, "type": "Person"}', '$.name');
```

```
+-------------------------------------------------------------------------------------+
| JSON_KEYS('{"name": {"first": "John", "last": "Doe"}, "type": "Person"}', '$.name') |
+-------------------------------------------------------------------------------------+
| ["first", "last"]                                                                   |
+-------------------------------------------------------------------------------------+
1 row in set (0.00 sec)
```

## [JSON_SEARCH()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-search)

`JSON_SEARCH(json_doc, one_or_all, str)` å‡½æ•°åœ¨ JSON æ–‡æ¡£ä¸­æœç´¢ä¸€ä¸ªæˆ–æ‰€æœ‰åŒ¹é…çš„å­—ç¬¦ä¸²ã€‚

ç¤ºä¾‹ï¼š

åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥æœç´¢ `cc` çš„ç¬¬ä¸€ä¸ªç»“æœï¼Œå®ƒä½äº `a` æ•°ç»„çš„ç´¢å¼• 2 ä½ç½®ã€‚

```sql
SELECT JSON_SEARCH('{"a": ["aa", "bb", "cc"], "b": ["cc", "dd"]}','one','cc');
```

```
+------------------------------------------------------------------------+
| JSON_SEARCH('{"a": ["aa", "bb", "cc"], "b": ["cc", "dd"]}','one','cc') |
+------------------------------------------------------------------------+
| "$.a[2]"                                                               |
+------------------------------------------------------------------------+
1 row in set (0.00 sec)
```

ç°åœ¨ä½ æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼Œä½†å°† `one_or_all` è®¾ç½®ä¸º `all` ä»¥è·å–ä¸ä»…æ˜¯ç¬¬ä¸€ä¸ªç»“æœï¼Œè€Œæ˜¯æ‰€æœ‰ç»“æœã€‚

```sql
SELECT JSON_SEARCH('{"a": ["aa", "bb", "cc"], "b": ["cc", "dd"]}','all','cc');
```

```
+------------------------------------------------------------------------+
| JSON_SEARCH('{"a": ["aa", "bb", "cc"], "b": ["cc", "dd"]}','all','cc') |
+------------------------------------------------------------------------+
| ["$.a[2]", "$.b[0]"]                                                   |
+------------------------------------------------------------------------+
1 row in set (0.01 sec)
```

## [MEMBER OF()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#operator_member-of)

`str MEMBER OF (json_array)` å‡½æ•°æµ‹è¯•ä¼ å…¥çš„å€¼ `str` æ˜¯å¦æ˜¯ `json_array` çš„å…ƒç´ ï¼Œå¦‚æœæ˜¯åˆ™è¿”å› `1`ã€‚å¦åˆ™è¿”å› `0`ã€‚å¦‚æœä»»ä½•å‚æ•°ä¸º `NULL`ï¼Œåˆ™è¿”å› `NULL`ã€‚

```
SELECT 'ğŸ' MEMBER OF ('["ğŸ","ğŸ¥¥","ğŸ¥­"]') AS 'åŒ…å«è è';
```

```
+----------+
| åŒ…å«è è |
+----------+
|        1 |
+----------+
1 row in set (0.00 sec)
```

## [JSON_OVERLAPS()](https://dev.mysql.com/doc/refman/8.0/en/json-search-functions.html#function_json-overlaps)

`JSON_OVERLAPS(json_doc, json_doc)` å‡½æ•°æŒ‡ç¤ºä¸¤ä¸ª JSON æ–‡æ¡£æ˜¯å¦æœ‰é‡å éƒ¨åˆ†ã€‚å¦‚æœæœ‰ï¼Œè¿”å› `1`ã€‚å¦‚æœæ²¡æœ‰ï¼Œè¿”å› `0`ã€‚å¦‚æœä»»ä½•å‚æ•°ä¸º `NULL`ï¼Œåˆ™è¿”å› `NULL`ã€‚

ç¤ºä¾‹ï¼š

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºæ²¡æœ‰é‡å ï¼Œå› ä¸ºæ•°ç»„å€¼çš„å…ƒç´ æ•°é‡ä¸åŒã€‚

```sql
SELECT JSON_OVERLAPS(
    '{"languages": ["Go","Rust","C#"]}',
    '{"languages": ["Go","Rust"]}'
) AS 'é‡å ';
```

```
+--------+
| é‡å    |
+--------+
|      0 |
+--------+
1 row in set (0.00 sec)
```

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºä¸¤ä¸ª JSON æ–‡æ¡£é‡å ï¼Œå› ä¸ºå®ƒä»¬å®Œå…¨ç›¸åŒã€‚

```sql
SELECT JSON_OVERLAPS(
    '{"languages": ["Go","Rust","C#"]}',
    '{"languages": ["Go","Rust","C#"]}'
) AS 'é‡å ';
```

```
+--------+
| é‡å    |
+--------+
|      1 |
+--------+
1 row in set (0.00 sec)
```

ä»¥ä¸‹ç¤ºä¾‹æ˜¾ç¤ºå­˜åœ¨é‡å ï¼Œè™½ç„¶ç¬¬äºŒä¸ªæ–‡æ¡£æœ‰ä¸€ä¸ªé¢å¤–çš„å±æ€§ã€‚

```sql
SELECT JSON_OVERLAPS(
    '{"languages": ["Go","Rust","C#"]}',
    '{"languages": ["Go","Rust","C#"], "arch": ["arm64"]}'
) AS 'é‡å ';
```

```
+--------+
| é‡å    |
+--------+
|      1 |
+--------+
1 row in set (0.00 sec)
```

## å¦è¯·å‚é˜…

- [JSON å‡½æ•°æ¦‚è§ˆ](/functions-and-operators/json-functions.md)
- [JSON æ•°æ®ç±»å‹](/data-type-json.md)
