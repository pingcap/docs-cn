---
title: 使用 TiDB 备份和恢复功能进行容灾
summary: 介绍在容灾场景下，如何使用 TiDB 备份与恢复功能？
---

# 使用 TiDB 备份和恢复功能进行容灾

基于 Raft 协议和合理的部署拓扑规划，TiDB 集群可以容忍单个机房或地理区域的故障，并继续向外提供服务。然而，在更大范围的自然灾害、软件漏洞、硬件故障、病毒攻击或常见的人为误操作的情况下，TiDB 的备份恢复功能可以将数据备份到独立的灾备存储设备中，以保护用户的数据不受损坏。 与其他方案相比，备份恢复功能具有灵活性、可靠性、可恢复性和成本效益等优势：

- 灵活性：备份恢复功能可以在不同的时间点进行备份，并且可以根据需要调整备份频率。这使得备份恢复功能更加灵活，能够更好地适应不同的业务场景。
- 可靠性：备份恢复功能通常会将备份数据保存在独立的存储设备上，使得数据安全得到进一步升级。
- 可恢复性：原始数据遇到任何的意外情况导致数据丢失或损坏，备份恢复功能可以通过恢复备份数据的方式来恢复数据库。这使得备份恢复功能具有很高的可恢复性，能够保证数据库的正常使用。
- 成本效益：备份恢复功能通常具有较低的成本，可以在不增加太多费用的情况下实现对数据库的安全保护。

总的来说，备份恢复功能是数据安全的最后一道防线，可以在不增加太多成本的情况下提高数据库的安全性和可靠性。它能够在各种意外情况发生时保护数据，使得用户可以安心地使用数据库，而不必担心数据丢失或损坏的风险。

## 备份恢复方案设计

![BR log backup and PITR architecture](/media/br/br-log-arch.png)

按照上述架构，用户可以将数据备份到其他 Region 的灾备存储设备中，并在需要时将数据恢复回来。这样，系统就能够容忍单个 Region 的故障，并且 Recovery Point Objective (RPO) 可以达到 5 分钟，Recovery Time Objective (RTO) 通常在几十分钟到数小时之间。但是，如果数据库尺寸较大，RTO 时间可能会更长。此外，TiDB 还提供了基于块存储快照技术的备份和恢复特性，可以将集群的恢复时间缩短到小时级别甚至 1 小时以内。TiDB 也在不断完善和优化基于存储快照技术的备份和恢复能力，以提供更好的服务。

## 使用备份恢复功能

TiDB 提供了丰富的文档，帮助用户了解如何在容灾场景下使用备份和恢复功能。其中，

- [如何使用 TiDB 备份和恢复功能?](/br/br-use-overview.md) 供了使用备份和恢复进行灾备的使用指引，包含备份策略、备份数据存放组织等。
- [TiDB 备份恢复常见问题](/faq/backup-and-restore-faq.md) 列出了使用备份和恢复功能时可能遇到的常见问题以及解决方案。
- [TiDB 备份与恢复功能架构](/br/backup-and-restore-design.md) 描述了 TiDB 备份和恢复功能的设计架构，包括备份的备份和恢复的流程、备份文件设计。
