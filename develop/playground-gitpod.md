---
title: Gitpod
---

# Gitpod

使用 [Gitpod](https://www.gitpod.io/) ，只需单击一个按钮/链接即可在浏览器中获得完整的开发环境，并且可以立即编写代码。

> [Gitpod](https://github.com/gitpod-io/gitpod) 是一个开源 Kubernetes 应用程序，适用于可直接编写代码的开发人员环境，可为云中的每个任务提供全新的自动化开发环境， 非常迅速。 它使您能够将您的开发环境描述为代码，并直接从您的浏览器或桌面 IDE 启动即时、远程和基于云的开发人员环境。

## 快速开始 {#quick-start}

这是一个 Spring Boot Web 应用程序 [pingcap-inc/tidb-example-java](https://github.com/pingcap-inc/tidb-example-java)。 更多细节请参考[这里](/develop/sample-application-spring-boot.md)。

1. Fork 这个[代码仓库](https://github.com/pingcap-inc/tidb-example-java)。

2. 通过浏览器的地址栏，在整个 URL 前加上 `gitpod.io/#` 来启动您的 gitpod 工作区。

- 例如，`gitpod.io/#<your-project-url>`。

3. 使用列出的提供商之一登录并启动工作区。

## 使用默认的 Gitpod 配置和环境

在步骤 [快速开始](#quick-start) 之后，Gitpod 会需要一段时间来设置您的工作区。

完成后，您将看到如下所示的页面。

![](/media/develop/playground-gitpod-workspace-init.png)

在这个场景中，我们使用 [TiUP](https://docs.pingcap.com/zh/tidb/stable/tiup-overview) 来搭建一个 TiDB Playground。 您可以在终端的左侧找到进度。

一旦 TiDB Playground 准备就绪，另一个 `Spring JPA Hibernate` 任务将运行。 您可以在终端的右侧找到进度。

完成所有任务后，您可以看到如下所示的页面。 您可以在左侧导航栏的`REMOTE EXPLORER`中找到您的端口`8080` URL。

![](/media/develop/playground-gitpod-workspace-ready.png)

您可以按照 [该指南](/develop/sample-application-spring-boot.md#第-6-步http-请求) 测试 API。 请记住将 URL `http://localhost:8080` 替换为您在 `REMOTE EXPLORER` 中找到的那个。

## 使用自定义的 Gitpod 配置和 Docker 镜像

### 自定义 Gitpod 配置

Gitpod 工作空间通过一个 `.gitpod.yml` 文件进行配置，该文件位于项目的根目录，用 YAML 语法编写。 这是一个示例：[示例 .gitpod.yml](https://github.com/shczhen/tidb-example-java/blob/main/.gitpod.yml)。

```yml
# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

# image:
#   file: .gitpod.Dockerfile

tasks:
  - name: TiUP init playground
    command: |
      $HOME/.tiup/bin/tiup playground
  - name: Test Case
    openMode: split-right
    command: |
      gp await-port 3930
      cd spring-jpa-hibernate
      make
ports:
  - port: 8080
    visibility: public
  - port: 4000
    visibility: public
  - port: 2379-36663
    onOpen: ignore
```

### 自定义 Gitpod Docker 镜像

> 默认情况下，Gitpod 使用名为 Workspace-Full 的标准 Docker 映像作为工作空间的基础。 基于此默认映像启动的工作区预装了 Docker、Go、Java、Node.js、C/C++、Python、Ruby、Rust、PHP 以及 Homebrew、Tailscale、Nginx 等工具。

您可以提供公共 Docker 映像或 Dockerfile。 并为您的项目安装所需的任何依赖项。

这是一个 Dockerfile 示例：[示例 .gitpod.Dockerfile](https://github.com/shczhen/tidb-example-java/blob/main/.gitpod.Dockerfile)

```dockerfile
FROM gitpod/workspace-java-17

RUN sudo apt install mysql-client -y
RUN curl --proto '=https' --tlsv1.2 -sSf https://tiup-mirrors.pingcap.com/install.sh | sh
```

然后我们需要更新`.gitpod.yml`：

```yml
# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

image:
  # Import your Dockerfile here
  file: .gitpod.Dockerfile

tasks:
  - name: TiUP init playground
    command: |
      $HOME/.tiup/bin/tiup playground
  - name: Test Case
    openMode: split-right
    command: |
      gp await-port 3930
      cd spring-jpa-hibernate
      make
ports:
  - port: 8080
    visibility: public
  - port: 4000
    visibility: public
  - port: 2379-36663
    onOpen: ignore
```

### 下一步

重新启动工作区以应用更改。
